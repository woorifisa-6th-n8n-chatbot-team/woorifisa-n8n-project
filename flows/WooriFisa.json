{
  "name": "WooriFisa",
  "nodes": [
    {
      "parameters": {
        "hasOutputParser": true,
        "options": {
          "systemMessage": "You are an intelligent assistant acting as a teaching assistant (TA)\nfor the \"ìš°ë¦¬FISA í´ë¼ìš°ë“œ ì—”ì§€ë‹ˆì–´ë§\" course.\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nRole & Response Style (MANDATORY)\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nYour role:\n- Support learners by answering questions clearly and practically.\n- Explain concepts in a calm, professional, but approachable teaching-assistant tone.\n- Guide learners using course-aligned explanations rather than overly academic or vague answers.\n\nResponse style rules:\n- Always respond in Korean.\n- Always use í•´ìš”ì²´.\n- Tone must resemble a university TA in their early-to-mid 20s:\n  - Calm, friendly, and supportive\n  - Clear and direct explanations\n  - Not casual slang, not overly formal\n- Be straightforward; do not speak vaguely.\n- Respect conventional and widely accepted practices.\n- Think with future learning continuity in mind.\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nSystem Time Tool (HIGHEST PRIORITY)\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nA tool is available that returns the current date and time in Korea (KST).\n\nRules:\n- If the user question contains any time- or date-related expression, you MUST use this tool FIRST.\n- Examples of triggers include: ì˜¤ëŠ˜, ì§€ê¸ˆ, í˜„ì¬, ì´ë²ˆ ì£¼, ë‹¤ìŒ ì£¼, ì–´ì œ, ë‚´ì¼, ë‚ ì§œ, ìš”ì¼, ëª‡ ì£¼ì°¨, ê¸°ì¤€ì¼, ì‹œì‘ì¼, ë§ˆê°ì¼\n- Relative expressions MUST be resolved using the returned Korean current date/time.\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nData Sources (Priority Order)\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nAlways follow this strict retrieval order for any question:\n\n1) System Time Tool (todayâ€™s date in KST)\n2) Blog vector store (Velog, Tistory)\n3) MySQL fisa_schedule table\n4) Lecture vector store (Notion URLs only)\n5) OpenAI Search Tool (supplementary, optional, for verification only)\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nData Source Details\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\n1) MySQL: fisa_schedule table\n- Columns:\n  - schedule_date (DATE)\n  - main_schedule (TEXT)\n  - detail_schedule (TEXT)\n  - special_lecture (TEXT)\n  - exam (BOOLEAN)\n  - extra_schedule (TEXT)\n- Highest authority for schedule-related questions: ì¼ì •, ì˜¤ëŠ˜, ë‹¤ìŒì£¼, ê³¼ì œ, ì§„ë„, ê³„íš, ë§ˆê°, ìŠ¤ì¼€ì¤„, ì£¼ì°¨, nì£¼ì°¨\n- Weekly ranges are derived from schedule_date, based on the official start date and System Time Tool.\n\n2) Blog vector store\n- Study journal posts written by learners\n- metadata.type = \"blog\"\n- URLs from Velog or Tistory\n- Primary source for learning content\n\n3) Lecture vector store\n- Official course lecture materials\n- metadata.type = \"lecture\"\n- URLs must be from Notion\n- Used to reinforce or formalize blog explanations\n\n4) OpenAI Search Tool (SUPPLEMENTARY)\n- Used only for refinement or verification of technical explanations\n- Must not override blog or lecture content\n- Must align with course scope\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nQuestion Classification (MANDATORY)\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nClassify every user question into one or more of:\n\n- \"ì¼ì • ì§ˆë¬¸\"\n- \"ìˆ˜ì—… ë‚´ìš© ì§ˆë¬¸\"\n- \"ì¼ë°˜ ì§ˆë¬¸\"\n\nRules:\n- ë‚ ì§œÂ·ì‹œê°„ í‘œí˜„ í¬í•¨ â†’ ì¼ì • ì§ˆë¬¸\n- ê¸°ìˆ , ê°œë…, ë„êµ¬ â†’ ìˆ˜ì—… ë‚´ìš© ì§ˆë¬¸\n- ê³¼ì • ì†Œê°œ, ì œë„, ê¸°íƒ€ â†’ ì¼ë°˜ ì§ˆë¬¸\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nEnhanced Retrieval Strategy for \"ìˆ˜ì—… ë‚´ìš© ì§ˆë¬¸\"\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nStep 1. Blog-first Retrieval\n- Always search Blog vector store first\n- Priority:\n  1) Week reference (nì£¼ì°¨) if present\n  2) Core technical keywords from the user question\n- Retrieve only metadata.type = \"blog\"\n\nStep 2. Keyword Extraction\n- Extract key technical terms from blog content:\n  - Technologies\n  - Core concepts\n  - Tools, commands, services\n- Use ONLY these keywords to search Lecture vector store\n\nStep 3. Lecture Retrieval\n- Search Lecture vector store using blog-derived keywords only\n- Only metadata.type = \"lecture\"\n- URLs must be from Notion\n\nStep 4. OpenAI Search Tool (OPTIONAL)\n- Only if blog + lecture content is:\n  - Insufficient\n  - Slightly outdated\n  - Lacking clarity\n- Purpose: confirm correctness, improve explanation\n- Must be clearly framed as â€œë³´ì¶© ì„¤ëª…â€ or â€œì¼ë°˜ì ì¸ ê¸°ì¤€â€\n\nStep 5. Answer Composition\n- Core explanation: Blog content\n- Reinforce/validate: Lecture content\n- Optional refinement: OpenAI search\n- If conflict: Lecture > Blog > Search\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nLearning Category (ONLY for ìˆ˜ì—… ë‚´ìš© ì§ˆë¬¸)\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nAssign exactly one:\n- ìë°”\n- ìŠ¤í”„ë§\n- n8n\n- ELK(elasticsearch, logstash, kibana)\n- ë„ì»¤\n- ì¿ ë²„ë„¤í‹°ìŠ¤\n- ë¦¬ëˆ…ìŠ¤\n- í´ë¼ìš°ë“œ\n- AWS\n\nIf NOT a learning question:\n- Category = \"ETC\"\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nOutput Format (TEXT ONLY)\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nAlways respond using plain text in the following order:\n\n1. ì§ˆë¬¸ ìœ í˜•\n2. ë‹µë³€\n3. í•™ìŠµ ì¹´í…Œê³ ë¦¬\n4. ì¼ì • (MySQL ê¸°ë°˜, í•´ë‹¹ë  ë•Œë§Œ)\n5. ìˆ˜ì—… ìë£Œ (Lectures)\n6. ë¸”ë¡œê·¸ ìë£Œ (Blogs)\n\nRules:\n- Never invent URLs\n- Lecture URLs: Notion only\n- Blog URLs: Velog or Tistory only\n- Explicitly state when data is missing\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nGlobal Rules\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\n- Always use System Time Tool first if question contains any date/time expression\n- Blog search is the primary source for learning content\n- MySQL schedule data has the highest authority for ì¼ì •\n- Blog â†’ Lecture â†’ OpenAI Search is the strict order for learning explanations\n- Do NOT mention internal retrieval steps or decision logic in the final answer\n- Always follow the fixed order: ì˜¤ëŠ˜ ë‚ ì§œ í™•ì¸ â†’ ë¸”ë¡œê·¸ ê²€ìƒ‰ â†’ ì¼ì • í™•ì¸ â†’ êµì•ˆ í™•ì¸\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        1656,
        2612
      ],
      "id": "d5a3063c-3316-4d7b-b55a-94edfb7749a3",
      "name": "Chatbot"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "edcd64db-8ece-412f-84ee-fdce959b7f39",
              "leftValue": "={{ $json.pages.length }}",
              "rightValue": "",
              "operator": {
                "type": "number",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        1920,
        2388
      ],
      "id": "7eb607e2-a149-43d0-9e42-8b46e9cc5464",
      "name": "í¬ë¡¤ë§ ê²°ê³¼ íŒë‹¨(Notion êµì•ˆ)"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "weeks",
              "triggerAtDay": [
                1
              ],
              "triggerAtHour": 1
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.3,
      "position": [
        1024,
        1360
      ],
      "id": "409b5e5b-e076-436b-8185-8b91a68c6b25",
      "name": "ì£¼ê°„ í¬ë¡¤ëŸ¬"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {}
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.3,
      "position": [
        1024,
        2388
      ],
      "id": "35dc832c-bcfb-4367-910c-5f1d83774c15",
      "name": "ì¼ê°„ í¬ë¡¤ëŸ¬"
    },
    {
      "parameters": {
        "fieldToSplitOut": "data.searchPosts.posts",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        1472,
        1360
      ],
      "id": "ae8dafe4-0216-4fee-9191-cae4107d3680",
      "name": "Split Out"
    },
    {
      "parameters": {
        "url": "=https://velog.io/@{{ $('1ê°œì”©').item.json.user.username }}/{{ $('1ê°œì”©').item.json.url_slug }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        2816,
        1040
      ],
      "id": "441ec3de-f5f9-47bd-b95c-6889a349489a",
      "name": "ìƒì„¸ì •ë³´ ê°€ì ¸ì˜¤ê¸°",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2144,
        1360
      ],
      "id": "ceb7fa96-3dd8-458b-ab27-69ffe40e9cbc",
      "name": "1ê°œì”©"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "weeks",
              "triggerAtDay": [
                1
              ],
              "triggerAtHour": 1
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.3,
      "position": [
        1024,
        1936
      ],
      "id": "d8b930b4-3e6f-4e37-a122-ac4c3986140e",
      "name": "ì£¼ê°„ í¬ë¡¤ëŸ¬1"
    },
    {
      "parameters": {
        "jsCode": "// Loop over input items and add a new field called 'myNewField' to the JSON of each one\nfor (const item of $input.all()) {\n  const text = item.json.data\n  .replace(/<script[\\s\\S]*?>[\\s\\S]*?<\\/script>/gi, '')\n  .replace(/<style[\\s\\S]*?>[\\s\\S]*?<\\/style>/gi, '')\n  .replace(/<[^>]*>/g, '')\n  .trim();\n  item.json.data = text;\n}\n\nreturn $input.all();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3040,
        1040
      ],
      "id": "a6649897-6129-406b-9fbe-01c7055a2aeb",
      "name": "HTML íƒœê·¸ ì œê±°"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1.1,
      "position": [
        4200,
        1336
      ],
      "id": "ba7afc2e-38cf-4228-9014-650f9f5b3d79",
      "name": "Default Data Loader"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.4,
      "position": [
        1024,
        2996
      ],
      "id": "3c62a807-bcb1-4d4f-973e-4bdd53383303",
      "name": "When chat message received",
      "webhookId": "6cb24967-894f-41cb-8bb3-457d418e5d63"
    },
    {
      "parameters": {
        "mode": "insert",
        "pineconeIndex": {
          "__rl": true,
          "value": "woorifisa-lectures",
          "mode": "list",
          "cachedResultName": "woorifisa-lectures"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [
        2816,
        2264
      ],
      "id": "f62e4e53-e8f9-4eba-b73f-cbda30bb253e",
      "name": "êµì•ˆ ìŠ¤í† ì–´",
      "credentials": {
        "pineconeApi": {
          "id": "8JRWuWhSq8WbHWLf",
          "name": "PineconeApi account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1.1,
      "position": [
        2952,
        2488
      ],
      "id": "41e2ce20-a934-470c-a6ec-ae2f2b050460",
      "name": "Default Data Loader1"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1",
          "mode": "list",
          "cachedResultName": "gpt-4.1"
        },
        "builtInTools": {
          "webSearch": {
            "searchContextSize": "low"
          }
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        1248,
        2836
      ],
      "id": "d313382d-d7be-4cdb-af0e-ac20199c28f2",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "VIaNxQPub35oMAIA",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "dimensions": 1024
        }
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        4072,
        1336
      ],
      "id": "fc02c7a6-9fb8-425a-84b1-233baa09ff95",
      "name": "Embeddings OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "VIaNxQPub35oMAIA",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "dimensions": 1024
        }
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        2824,
        2488
      ],
      "id": "08bf7061-33c4-464d-9c70-ee039b4d4228",
      "name": "Embeddings OpenAI1",
      "credentials": {
        "openAiApi": {
          "id": "VIaNxQPub35oMAIA",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2368,
        2388
      ],
      "id": "ee53c3b4-e68c-46f0-83bc-905c0e3a0d43",
      "name": "Loop Over Items2"
    },
    {
      "parameters": {
        "jsCode": "function generateEmbedding(){\n  const title = \"title: \" + $input.first().json.title;\n  const content = \"content: \" + $input.first().json.content;\n  const url = \"url: \" + $input.first().json.url;\n\n  return title + \"\\n\" + content + \"\\n\" + url + \"\\n\";\n}\n\nreturn [{\n  embedding: generateEmbedding()\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2592,
        2264
      ],
      "id": "1916fbc9-a073-4fff-97b5-eec0f0ef6ead",
      "name": "Code in JavaScript1"
    },
    {
      "parameters": {
        "options": {
          "dimensions": 1024
        }
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        1584,
        3044
      ],
      "id": "5e8a30d9-49c4-424b-9d69-1067d22e491b",
      "name": "Embeddings OpenAI2",
      "credentials": {
        "openAiApi": {
          "id": "VIaNxQPub35oMAIA",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "dimensions": 1024
        }
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        1872,
        3044
      ],
      "id": "2f597b4a-0460-4c5b-ac70-a2dfb54652e6",
      "name": "Embeddings OpenAI3",
      "credentials": {
        "openAiApi": {
          "id": "VIaNxQPub35oMAIA",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "You are a retrieval-based assistant.\n\nThe knowledge base is a unified vector store containing embedded documents.\nEach document includes a metadata field called \"type\" that identifies its source:\n\n- type: \"material\" â†’ official lecture materials and course handouts\n- type: \"blog\" â†’ study journal blog posts written during learning\n\nThe lecture materials are related to:\n- Java Spring\n- Docker\n- Cloud and infrastructure concepts\n\nEach document includes:\n- Content\n- A title\n- A brief summary\n- A reference (file name, document link, or URL)\n\nWhen a user asks a question, follow these rules strictly:\n\n1. Retrieve the most relevant documents from the vector store using semantic similarity.\n2. Use ONLY the retrieved documents to construct the answer.\n3. Do NOT use prior knowledge, general knowledge, or assumptions.\n4. Separate retrieved documents based on their \"type\" metadata:\n   - Documents with type \"material\" must be placed in the \"materials\" array.\n   - Documents with type \"blog\" must be placed in the \"blogs\" array.\n\nResponse rules:\n- The response MUST be returned strictly in JSON format.\n- Do NOT include any text outside the JSON response.\n- Do NOT invent or infer any information.\n- Use only the exact metadata provided in the retrieved documents.\n- If no relevant documents exist for a section, return an empty array for that section.\n\nThe JSON response must follow this exact structure:\n\n{\n  \"answer\": string,\n  \"materials\": [\n    {\n      \"title\": string,\n      \"summary\": string,\n      \"reference\": string\n    }\n  ],\n  \"blogs\": [\n    {\n      \"title\": string,\n      \"summary\": string,\n      \"link\": string\n    }\n  ]\n}\n\nAdditional constraints:\n- \"materials\" and \"blogs\" must always be arrays.\n- Include only documents that are directly relevant to the user's question.\n- If no documents are relevant at all, return an empty array for both \"materials\" and \"blogs\", and keep \"answer\" concise and based only on retrieved content (or empty if nothing is retrieved).\n",
        "pineconeIndex": {
          "__rl": true,
          "value": "woorifisa-lectures",
          "mode": "list",
          "cachedResultName": "woorifisa-lectures"
        },
        "topK": 5,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [
        1504,
        2836
      ],
      "id": "0f601942-786f-42ce-9268-7a6cb481a357",
      "name": "lecture store(read)",
      "credentials": {
        "pineconeApi": {
          "id": "8JRWuWhSq8WbHWLf",
          "name": "PineconeApi account"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "ìˆ˜ì—… êµì•ˆìë£Œ\n",
        "pineconeIndex": {
          "__rl": true,
          "value": "woorifisa-blogs",
          "mode": "list",
          "cachedResultName": "woorifisa-blogs"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [
        1792,
        2836
      ],
      "id": "3d0b13dc-1635-4bd9-bd69-574419409a98",
      "name": "blog store(read)",
      "credentials": {
        "pineconeApi": {
          "id": "8JRWuWhSq8WbHWLf",
          "name": "PineconeApi account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "edcd64db-8ece-412f-84ee-fdce959b7f39",
              "leftValue": "={{ $input.all().isNotEmpty() }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        1920,
        1936
      ],
      "id": "25760a06-d1cb-4000-950d-39f7033d3784",
      "name": "0ê°œ ì´ìƒ1"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2144,
        1936
      ],
      "id": "75d1eedc-551a-48c5-9281-4892eef3deb5",
      "name": "1ê°œì”©1"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "responses": {
          "values": [
            {
              "role": "system",
              "content": "You are an assistant that transforms educational materials into a format **optimized for semantic embedding**.\n\nInput:\n- Lecture notes, blog learning logs, study materials, etc.\n- Technology scope: Java Spring, Docker, Cloud/Infrastructure\n- Input data may include title, content, url, source, and other metadata\n\nOutput Goals:\n- Do **not summarize**; preserve full learning structure and conceptual flow\n- Explicitly clarify learning topics and scope\n- Highlight step-by-step learning progression or sequence\n- Clearly explain relationships between key technologies, concepts, and tools\n- Convert lists or bullet points into coherent explanatory sentences\n- Emphasize curriculum order, learning progression, and conceptual grouping\n- Include original URLs for reference\n- Output format: JSON with a single field `\"embedding_text\"` containing **one continuous string**\n\nExample Output:\n\n{\n  \"embedding_text\": \"Java Spring learning materials are structured around the MVC pattern, explaining the roles and relationships of Model, View, and Controller. The Model handles data and business logic, the View provides the user interface, and the Controller manages requests and connects the Model and View. Additionally, DAO and DTO patterns optimize data access and transfer. The step-by-step learning sequence progresses from basic syntax â†’ object-oriented programming â†’ database integration â†’ Spring MVC structure â†’ hands-on exercises. URL: https://example.com\"\n}\n\nRules:\n1. Never summarize; maintain the full conceptual and learning flow\n2. Do not add information that is not present in the input\n3. Output must be JSON with only one field `\"embedding_text\"` as a single string\n4. Keep technical terms in English without translating\n"
            },
            {
              "content": "=data: {{ $json.data }}\nurl: \"https://velog.io/@{{ $json.user.username }}/{{ $json.url_slug }}\""
            }
          ]
        },
        "builtInTools": {},
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 2.1,
      "position": [
        3488,
        1112
      ],
      "id": "9a08e8a5-c588-40e4-9968-dca1c4a3106b",
      "name": "ì„ë² ë”© ë¬¸ì„œ ìµœì í™”",
      "credentials": {
        "openAiApi": {
          "id": "VIaNxQPub35oMAIA",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "responses": {
          "values": [
            {
              "role": "system",
              "content": "You are an assistant that transforms educational materials into a format **optimized for semantic embedding**.\n\nInput:\n- Lecture notes, blog learning logs, study materials, etc.\n- Technology scope: Java Spring, Docker, Cloud/Infrastructure\n- Input data may include title, content, url, source, and other metadata\n\nOutput Goals:\n- Do **not summarize**; preserve full learning structure and conceptual flow\n- Explicitly clarify learning topics and scope\n- Highlight step-by-step learning progression or sequence\n- Clearly explain relationships between key technologies, concepts, and tools\n- Convert lists or bullet points into coherent explanatory sentences\n- Emphasize curriculum order, learning progression, and conceptual grouping\n- Include original URLs for reference\n- Output format: JSON with a single field `\"embedding_text\"` containing **one continuous string**\n\nExample Output:\n\n{\n  \"embedding_text\": \"Java Spring learning materials are structured around the MVC pattern, explaining the roles and relationships of Model, View, and Controller. The Model handles data and business logic, the View provides the user interface, and the Controller manages requests and connects the Model and View. Additionally, DAO and DTO patterns optimize data access and transfer. The step-by-step learning sequence progresses from basic syntax â†’ object-oriented programming â†’ database integration â†’ Spring MVC structure â†’ hands-on exercises. URL: https://example.com\"\n}\n\nRules:\n1. Never summarize; maintain the full conceptual and learning flow\n2. Do not add information that is not present in the input\n3. Output must be JSON with only one field `\"embedding_text\"` as a single string\n4. Keep technical terms in English without translating\n"
            }
          ]
        },
        "builtInTools": {},
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 2.1,
      "position": [
        2816,
        1688
      ],
      "id": "fd714104-58ef-4d12-92d0-27efe554e1d9",
      "name": "ì„ë² ë”© ë¬¸ì„œ ìµœì í™” 2",
      "credentials": {
        "openAiApi": {
          "id": "VIaNxQPub35oMAIA",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "dimensions": 1024
        }
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        3400,
        1912
      ],
      "id": "73eedd2f-33f2-4d2c-af2a-6f3947156ee3",
      "name": "Embeddings OpenAI4",
      "credentials": {
        "openAiApi": {
          "id": "VIaNxQPub35oMAIA",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1.1,
      "position": [
        3528,
        1912
      ],
      "id": "bd0c9494-e169-4525-95eb-8201e6593af5",
      "name": "Default Data Loader2"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "2445c0b2-9c27-4c74-89de-165fb7091d95",
              "leftValue": "={{ $json.released_at }}",
              "rightValue": "={{  $now }}",
              "operator": {
                "type": "dateTime",
                "operation": "beforeOrEquals"
              }
            },
            {
              "id": "1ddaec4a-7fa8-401e-bf13-08dec78e2d03",
              "leftValue": "={{ $json.released_at }}",
              "rightValue": "={{ $now.minus(1, 'year' ) }}",
              "operator": {
                "type": "dateTime",
                "operation": "afterOrEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.3,
      "position": [
        1696,
        1360
      ],
      "id": "bea7518a-db9e-4426-ba64-5b58f8a79bee",
      "name": "ì €ë²ˆì£¼ ë°ì´í„°ë§Œ í•„í„°(ì„ì‹œ 1ë…„)"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "edd1ffb1-520a-4c2d-85aa-06bf229a92fe",
              "leftValue": "={{ $json.published_date }}",
              "rightValue": "={{ $now }}",
              "operator": {
                "type": "dateTime",
                "operation": "beforeOrEquals"
              }
            },
            {
              "id": "2e9cb341-a99e-434c-a2b0-6a72fd7bfa9f",
              "leftValue": "={{ $json.published_date }}",
              "rightValue": "={{ $now.minus(1, 'year') }}",
              "operator": {
                "type": "dateTime",
                "operation": "afterOrEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.3,
      "position": [
        1696,
        1936
      ],
      "id": "f8cd846e-dea7-4dfc-8e6b-e2c2bc21f83d",
      "name": "ì €ë²ˆì£¼ ë°ì´í„°ë§Œ í•„í„°(ì„ì‹œ 1ë…„)2"
    },
    {
      "parameters": {
        "fieldToSplitOut": "data.tistory_posts",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        1472,
        1936
      ],
      "id": "1c9414d4-2367-4b87-8644-93f3d6d259dd",
      "name": "Split Out1"
    },
    {
      "parameters": {
        "jsCode": "return [{\n  embedding: JSON.parse($input.first().json.output[0].content[0].text).embedding_text\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3168,
        1688
      ],
      "id": "5cf4a665-8e30-48d8-a9e9-145e6fb2cbd6",
      "name": "ì„ë² ë”© ì¶”ì¶œ"
    },
    {
      "parameters": {
        "jsCode": "return [{\n  embedding: JSON.parse($input.first().json.output[0].content[0].text).embedding_text\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3840,
        1112
      ],
      "id": "c22f40a1-9102-4367-a208-916623bc1a99",
      "name": "ì„ë² ë”© ì¶”ì¶œ2"
    },
    {
      "parameters": {
        "mode": "insert",
        "pineconeIndex": {
          "__rl": true,
          "value": "woorifisa-blogs",
          "mode": "list",
          "cachedResultName": "woorifisa-blogs"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [
        3392,
        1688
      ],
      "id": "0031a471-eaf1-44a3-86db-c9811c6f7944",
      "name": "ë¸”ë¡œê·¸ store(ì €ì¥)",
      "credentials": {
        "pineconeApi": {
          "id": "8JRWuWhSq8WbHWLf",
          "name": "PineconeApi account"
        }
      }
    },
    {
      "parameters": {
        "mode": "insert",
        "pineconeIndex": {
          "__rl": true,
          "value": "woorifisa-blogs",
          "mode": "list",
          "cachedResultName": "woorifisa-blogs"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [
        4064,
        1112
      ],
      "id": "912e576c-6689-4000-ba20-fe71d334e96c",
      "name": "ë¸”ë¡œê·¸ ìŠ¤í† ì–´ ì €ì¥2",
      "credentials": {
        "pineconeApi": {
          "id": "8JRWuWhSq8WbHWLf",
          "name": "PineconeApi account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://v2.velog.io/graphql",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "content-type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "query",
              "value": "query SearchPosts($keyword: String!, $offset: Int, $username: String) {       searchPosts(keyword: $keyword, offset: $offset, username: $username) {         count         posts {           id           title           short_description           thumbnail           user {             id             username             profile {               id               thumbnail               display_name               __typename             }             __typename           }           url_slug           released_at           tags           is_private           comments_count           __typename         }         __typename       }     }"
            },
            {
              "name": "variables",
              "value": "{\"keyword\": \"ìš°ë¦¬fisa í´ë¼ìš°ë“œ ì—”ì§€ë‹ˆì–´ë§\"}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1248,
        1360
      ],
      "id": "c7f51eb0-f070-4c76-8384-50bc9cdaed65",
      "name": "velog í¬ë¡¤ëŸ¬",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "jsCode": "// ì„¹ì…˜ë³„ ë¶„ë¦¬\nfunction extract(label, text) {\n  const regex = new RegExp(`${label}[\\\\s\\\\S]*?(?=\\\\n\\\\d+\\\\. |$)`, \"g\");\n  const match = text.match(regex);\n  if (!match) return \"\";\n  return match[0].replace(label, \"\").trim();\n}\n\nfor (const item of $input.all()) {\n   // ì„¹ì…˜ ì¶”ì¶œ\n  const raw = item.json.output;\n  const questionType = extract(\"1. ì§ˆë¬¸ ìœ í˜•\",raw);\n  const generalAnswer = extract(\"2. ë‹µë³€\",raw);\n  const category = extract(\"3. í•™ìŠµ ì¹´í…Œê³ ë¦¬\",raw);\n  const schedule = extract(\"4. ì¼ì •\",raw);\n  const lectures = extract(\"5. ìˆ˜ì—… ìë£Œ\",raw);\n  const blogs = extract(\"6. ë¸”ë¡œê·¸ ìë£Œ\",raw);\n  \n  // í˜„ì¬ ì‹œê°„\n  const now = new Date().toISOString();\n\n  return {\n      ì§ˆë¬¸ìœ í˜•: questionType,\n      í•™ìŠµì¹´í…Œê³ ë¦¬: category,\n      ë‹µë³€: generalAnswer,\n      ì¼ì •: schedule,\n      ìˆ˜ì—…ìë£Œ: lectures,\n      ë¸”ë¡œê·¸ìë£Œ: blogs,\n      ìƒì„±ì¼ì‹œ: now\n    }\n}\n\nreturn $input.all();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2416,
        2820
      ],
      "id": "c3e895bc-dfe5-4472-b935-d8f1b0b2da30",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineAll",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        2640,
        2996
      ],
      "id": "66e96b2d-2f4a-4ff7-aa66-9354aae06521",
      "name": "Merge1"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryRedisChat",
      "typeVersion": 1.5,
      "position": [
        1376,
        2836
      ],
      "id": "8d4742e9-b0b8-40fc-be3b-20e8e8f0ba17",
      "name": "Redis Chat Memory",
      "credentials": {
        "redis": {
          "id": "HN8PIYrmFU9GgbGF",
          "name": "Redis account"
        }
      }
    },
    {
      "parameters": {
        "table": {
          "__rl": true,
          "value": "fisa_chat_histories",
          "mode": "list",
          "cachedResultName": "fisa_chat_histories"
        },
        "dataMode": "defineBelow",
        "valuesToSend": {
          "values": [
            {
              "column": "question_type",
              "value": "={{ $json['ì§ˆë¬¸ìœ í˜•'] }}"
            },
            {
              "column": "learning_category",
              "value": "={{ $json['í•™ìŠµì¹´í…Œê³ ë¦¬'] }}"
            },
            {
              "column": "general_answer",
              "value": "={{ $json['ë‹µë³€'] }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.5,
      "position": [
        2864,
        2996
      ],
      "id": "a90775ff-ca96-4de9-873a-4740f70c5064",
      "name": "Insert rows in a table",
      "credentials": {
        "mySql": {
          "id": "DHP9uh7a5FDPRcqk",
          "name": "MySQL account"
        }
      }
    },
    {
      "parameters": {
        "operation": "select",
        "table": {
          "__rl": true,
          "value": "fisa_schedule",
          "mode": "list",
          "cachedResultName": "fisa_schedule"
        },
        "limit": 200,
        "options": {}
      },
      "type": "n8n-nodes-base.mySqlTool",
      "typeVersion": 2.5,
      "position": [
        2080,
        2836
      ],
      "id": "0e709296-4af2-40d1-8742-165e355c5e80",
      "name": "Select rows from a table in MySQL",
      "credentials": {
        "mySql": {
          "id": "DHP9uh7a5FDPRcqk",
          "name": "MySQL account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "edcd64db-8ece-412f-84ee-fdce959b7f39",
              "leftValue": "={{ $input.all().isNotEmpty() }}",
              "rightValue": {},
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        1920,
        1360
      ],
      "id": "d41fe2da-140c-430b-98a4-7927e92f59ad",
      "name": "0ê°œ ì´ìƒ"
    },
    {
      "parameters": {
        "operation": "select",
        "table": {
          "__rl": true,
          "value": "fisa_crawl_histories",
          "mode": "list",
          "cachedResultName": "fisa_crawl_histories"
        },
        "where": {
          "values": [
            {
              "column": "url",
              "value": "=https://velog.io/@{{ $json.user.username }}/{{ $json.url_slug }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.5,
      "position": [
        2368,
        1040
      ],
      "id": "3d1c211c-9272-4b2c-8e3b-a5cf11fec180",
      "name": "ì¤‘ë³µ ë°ì´í„° í™•ì¸",
      "alwaysOutputData": true,
      "credentials": {
        "mySql": {
          "id": "DHP9uh7a5FDPRcqk",
          "name": "MySQL account"
        }
      }
    },
    {
      "parameters": {
        "table": {
          "__rl": true,
          "value": "fisa_crawl_histories",
          "mode": "list",
          "cachedResultName": "fisa_crawl_histories"
        },
        "dataMode": "defineBelow",
        "valuesToSend": {
          "values": [
            {
              "column": "source_type",
              "value": "blog"
            },
            {
              "column": "url",
              "value": "=https://velog.io/@{{ $('Merge').item.json.user.username }}/{{ $('Merge').item.json.url_slug }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.5,
      "position": [
        4416,
        1236
      ],
      "id": "ee89ae37-33b4-46cb-adb0-812b2afbc526",
      "name": "ë¸”ë¡œê·¸ í¬ë¡¤ë§ ì •ë³´ ì €ì¥",
      "credentials": {
        "mySql": {
          "id": "DHP9uh7a5FDPRcqk",
          "name": "MySQL account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "2eb0f95a-4558-4687-b230-ab68e41c49ac",
              "leftValue": "={{$json.values() }}",
              "rightValue": "",
              "operator": {
                "type": "array",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        2592,
        1040
      ],
      "id": "89cefc3a-085a-4052-b573-30ec57181aa6",
      "name": "ì¤‘ë³µì´ ì•„ë‹Œ ê²½ìš°"
    },
    {
      "parameters": {
        "operation": "select",
        "table": {
          "__rl": true,
          "value": "fisa_crawl_histories",
          "mode": "list",
          "cachedResultName": "fisa_crawl_histories"
        },
        "where": {
          "values": [
            {
              "column": "url",
              "value": "=https://velog.io/@{{ $json.user.username }}/{{ $json.url_slug }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.5,
      "position": [
        2368,
        1688
      ],
      "id": "d443e83b-0d60-43cb-941d-c25ac382a543",
      "name": "ì¤‘ë³µ ë°ì´í„° í™•ì¸1",
      "alwaysOutputData": true,
      "credentials": {
        "mySql": {
          "id": "DHP9uh7a5FDPRcqk",
          "name": "MySQL account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "cd9783cd-f5de-437f-93b7-2dc6a459eacc",
              "leftValue": "",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        2592,
        1688
      ],
      "id": "2d643e3c-9528-4b8c-a511-7b608f631262",
      "name": "If"
    },
    {
      "parameters": {
        "table": {
          "__rl": true,
          "value": "fisa_crawl_histories",
          "mode": "list",
          "cachedResultName": "fisa_crawl_histories"
        },
        "dataMode": "defineBelow",
        "valuesToSend": {
          "values": [
            {
              "column": "source_type",
              "value": "blog"
            },
            {
              "column": "url",
              "value": "={{ $('0ê°œ ì´ìƒ1').first().json.source_url }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.5,
      "position": [
        3744,
        1812
      ],
      "id": "da968da3-f906-4e8d-819c-d8430eaf0a4a",
      "name": "ë¸”ë¡œê·¸ í¬ë¡¤ë§ ì •ë³´ ì €ì¥1",
      "credentials": {
        "mySql": {
          "id": "DHP9uh7a5FDPRcqk",
          "name": "MySQL account"
        }
      }
    },
    {
      "parameters": {
        "table": {
          "__rl": true,
          "value": "fisa_crawl_history",
          "mode": "list",
          "cachedResultName": "fisa_crawl_history"
        },
        "dataMode": "defineBelow",
        "valuesToSend": {
          "values": [
            {
              "column": "source_type",
              "value": "notion"
            },
            {
              "column": "url",
              "value": "={{ $('Loop Over Items2').item.json.url }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.5,
      "position": [
        3168,
        2388
      ],
      "id": "18ed378e-bc91-4e55-96f6-9eb80370eae9",
      "name": "Insert rows in a table1",
      "credentials": {
        "mySql": {
          "id": "DHP9uh7a5FDPRcqk",
          "name": "MySQL account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://notion-crawler:3000/crawl",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "excludeUrls",
              "value": "={{ $json.urls }}"
            }
          ]
        },
        "options": {
          "timeout": 100000000
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1696,
        2388
      ],
      "id": "5bd8eccb-f4ab-4c82-b495-2a1ae05d8715",
      "name": "êµì•ˆ ë…¸ì…˜ í¬ë¡¤ëŸ¬"
    },
    {
      "parameters": {
        "fieldToSplitOut": "pages",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        2144,
        2388
      ],
      "id": "eea37aae-2c08-47d1-b289-77a0a88657f5",
      "name": "Split Out2"
    },
    {
      "parameters": {
        "jsCode": "// Loop over input items and add a new field called 'myNewField' to the JSON of each one\nconst urls = [];\nfor (const item of $input.all()) {\n  urls.push(item.json.url)\n}\n\nreturn {\n  urls\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1472,
        2388
      ],
      "id": "29faaa90-3e15-4265-aee6-4c2c15da78d4",
      "name": "Code in JavaScript2"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineAll",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        3264,
        1112
      ],
      "id": "a0b5cd82-47c4-4ee1-840a-5771a28c3d7c",
      "name": "Merge"
    },
    {
      "parameters": {
        "description": "You can call the MCP to retrieve the current date and time\nbased on the user's locale and timezone.\n\nYou MUST call the MCP in the following cases:\n- When the user mentions relative dates such as:\n  \"today\", \"tomorrow\", \"yesterday\", \"this week\", \"next week\", or similar expressions\n- When calculating schedules, deadlines, or plans that depend on the current date\n- When resolving expressions like \"n days later\", \"this month\", or \"next month\"\n\nThe MCP returns the current date and time adjusted to the user's locale.\nAlways use the MCP result as the source of truth for \"now\".\n\nDo NOT assume or hardcode the current date or time.\nDo NOT calculate relative dates without calling the MCP first.\n",
        "jsCode": "return new Date().toLocaleString('ko-KR', {\n  timeZone: 'Asia/Seoul'\n})\n"
      },
      "type": "@n8n/n8n-nodes-langchain.toolCode",
      "typeVersion": 1.3,
      "position": [
        2208,
        2836
      ],
      "id": "840ffd3e-6231-477a-9675-245bcb0eb418",
      "name": "í˜„ì¬ë‚ ì§œ ë°˜í™˜"
    },
    {
      "parameters": {
        "operation": "select",
        "table": {
          "__rl": true,
          "value": "fisa_crawl_histories",
          "mode": "list",
          "cachedResultName": "fisa_crawl_histories"
        },
        "where": {
          "values": [
            {
              "column": "source_type",
              "value": "notion"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.5,
      "position": [
        1248,
        2388
      ],
      "id": "b7b47268-947b-4ed8-9e08-93e52cea16bf",
      "name": "í¬ë¡¤ë§url ì¡°íšŒ",
      "alwaysOutputData": true,
      "credentials": {
        "mySql": {
          "id": "DHP9uh7a5FDPRcqk",
          "name": "MySQL account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.output[0].content[0].text }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "### TASK GUIDELINES\n1. **Language**: The quiz questions, options, and instructions MUST be written in **Korean**.\n2. **Technical Terms**: Keep core technical terms (e.g., Docker, Kubernetes, JVM, AWS, etc.) in English or include them in parentheses for clarity.\n3. **Question Composition**: Generate exactly 3 questions:\n   - **Q1 (Multiple Choice)**: Focus on a core theoretical concept. Provide 4 options in Korean.\n   - **Q2 (Short Answer)**: Focus on a specific tool, command, or technical term.\n   - **Q3 (Scenario/OX)**: A practical application question or a True/False statement.\n4. **Tone**: Use a polite, encouraging, and professional tone suitable for a Slack community. Use emojis (ğŸš€, ğŸ’¡, âœ…) to enhance readability.\n\n### OUTPUT STRUCTURE (MUST BE IN KOREAN)\n## ğŸ“ ì´ë²ˆ ì£¼ ë³µìŠµ í€´ì¦ˆ (Weekly Review)\n\nì•ˆë…•í•˜ì„¸ìš”! ì´ë²ˆ ì£¼ì— í•™ìŠµí•œ ì£¼ìš” ë‚´ìš©ì„ ë³µìŠµí•´ ë³¼ê¹Œìš”? \nê°€ë³ê²Œ í€´ì¦ˆë¥¼ í’€ë©° ë³¸ì¸ì˜ ì´í•´ë„ë¥¼ ì²´í¬í•´ ë³´ì„¸ìš”! ğŸ”¥\n\n---\n\n### [Q1] ê°ê´€ì‹ í€´ì¦ˆ: ê°œë… í™•ì¸\n(Write the question in Korean here)\n1) (Option A)\n2) (Option B)\n3) (Option C)\n4) (Option D)\n\n### [Q2] ë‹¨ë‹µí˜• í€´ì¦ˆ: ìš©ì–´ ë° ëª…ë ¹ì–´\n(Write the question in Korean here)\n> íŒíŠ¸: (Provide a short Korean hint if necessary)\n\n### [Q3] OX/ì‘ìš© í€´ì¦ˆ: ì‹¤ë¬´ ìƒí™©\n(Write the question in Korean here)\n\n### CONTEXT & DATA USAGE GUIDELINES\n\n- If no explicit input data (such as topic, document, or summary) is provided:\n  - You MUST generate the quiz using the provided Vector Database.\n  - Retrieve the most relevant and/or most recent vectors as the primary context.\n  - Assume the Vector Database contains recent weekly learning materials, technical notes, or study content.\n\n- If explicit input data is provided:\n  - Prioritize user-provided input first.\n  - Use the Vector Database only as supplementary context.\n\n- Do NOT ask the user for missing input.\n- Do NOT mention the Vector Database, embeddings, retrieval, or context sources in the output.\n- The output must appear as a natural weekly review based on learned content.\n\n---\n\n### CONTENT SELECTION RULES\n\n- Select topics that are:\n  - Core and conceptually important (avoid trivia).\n  - Appropriate for a weekly technical review.\n  - Reasonably inferable from common backend, infrastructure, or software engineering study materials.\n\n- Question intent requirements:\n  - Q1: Foundational theoretical concept.\n  - Q2: Specific tool, command, or technical term.\n  - Q3: Realistic practical scenario or O/X (True/False) question.\n\n---\n\n### OUTPUT CONSTRAINTS\n\n- Follow the original OUTPUT STRUCTURE exactly.\n- All output MUST be written in Korean.\n- Maintain a polite, encouraging, and professional tone suitable for a Slack community.\n- Use emojis (ğŸš€ ğŸ’¡ âœ…) naturally and sparingly.\n- Do NOT include any explanations, metadata, or notes outside the defined output structure.\n\n---\n\n### MODEL BEHAVIOR SUMMARY\n\nEven when no explicit input is given, generate a meaningful weekly review quiz by leveraging the provided Vector Database and common technical learning patterns.\n\n### ANSWER GENERATION GUIDELINES (REQUIRED)\n\n- You MUST provide correct answers for all generated questions (Q1, Q2, Q3).\n- Answers MUST be included in the output.\n- Answers MUST be placed in a clearly separated section titled exactly:\n\n## âœ… ì •ë‹µ & í•´ì„¤\n\n- For each question:\n  - Q1: Provide the correct option number.\n  - Q2: Provide the correct short answer.\n  - Q3: Provide O or X as the answer.\n- Include a brief one-line explanation for each answer, written in Korean.\n- Explanations should be concise and educational, suitable for a weekly review.\n\n---\n\n### ANSWER OUTPUT RULES\n\n- The answer section MUST appear after all quiz questions.\n- Follow this exact format:\n\n- **Q1 ì •ë‹µ:** (ì •ë‹µ ë²ˆí˜¸)  \n  ğŸ‘‰ (í•œ ì¤„ í•´ì„¤)\n\n- **Q2 ì •ë‹µ:** (ì •ë‹µ)  \n  ğŸ‘‰ (í•œ ì¤„ í•´ì„¤)\n\n- **Q3 ì •ë‹µ:** O / X  \n  ğŸ‘‰ (í•œ ì¤„ í•´ì„¤)\n\n- Do NOT reveal answers within the question sections.\n- Do NOT include any content outside the defined quiz and answer structure.\n\n---\n\n### FINAL OUTPUT CONSTRAINT (IMPORTANT)\n\n- The final output MUST include:\n  1. Quiz questions (Q1â€“Q3)\n  2. The \"## âœ… ì •ë‹µ & í•´ì„¤\" section\n- All content MUST be written in Korean.\n- Do NOT mention internal reasoning, Vector Database usage, or prompt instructions.\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        2208,
        3460
      ],
      "id": "27cc1ad0-e73d-4c66-a2e6-9ffd4d2c65cc",
      "name": "Chatbot1"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "builtInTools": {},
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        2048,
        3684
      ],
      "id": "68075c92-9441-41b2-8ec9-518d7dd5910c",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "VIaNxQPub35oMAIA",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "dimensions": 1024
        }
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        2384,
        3892
      ],
      "id": "868fd750-3ca8-4302-8b0c-e1b05e0ef865",
      "name": "Embeddings OpenAI5",
      "credentials": {
        "openAiApi": {
          "id": "VIaNxQPub35oMAIA",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "dimensions": 1024
        }
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        2672,
        3892
      ],
      "id": "2d1e1bc4-a5af-4e73-8097-fa0f6804dfdb",
      "name": "Embeddings OpenAI6",
      "credentials": {
        "openAiApi": {
          "id": "VIaNxQPub35oMAIA",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "You are a retrieval-based assistant.\n\nThe knowledge base is a unified vector store containing embedded documents.\nEach document includes a metadata field called \"type\" that identifies its source:\n\n- type: \"material\" â†’ official lecture materials and course handouts\n- type: \"blog\" â†’ study journal blog posts written during learning\n\nThe lecture materials are related to:\n- Java Spring\n- Docker\n- Cloud and infrastructure concepts\n\nEach document includes:\n- Content\n- A title\n- A brief summary\n- A reference (file name, document link, or URL)\n\nWhen a user asks a question, follow these rules strictly:\n\n1. Retrieve the most relevant documents from the vector store using semantic similarity.\n2. Use ONLY the retrieved documents to construct the answer.\n3. Do NOT use prior knowledge, general knowledge, or assumptions.\n4. Separate retrieved documents based on their \"type\" metadata:\n   - Documents with type \"material\" must be placed in the \"materials\" array.\n   - Documents with type \"blog\" must be placed in the \"blogs\" array.\n\nResponse rules:\n- The response MUST be returned strictly in JSON format.\n- Do NOT include any text outside the JSON response.\n- Do NOT invent or infer any information.\n- Use only the exact metadata provided in the retrieved documents.\n- If no relevant documents exist for a section, return an empty array for that section.\n\nThe JSON response must follow this exact structure:\n\n{\n  \"answer\": string,\n  \"materials\": [\n    {\n      \"title\": string,\n      \"summary\": string,\n      \"reference\": string\n    }\n  ],\n  \"blogs\": [\n    {\n      \"title\": string,\n      \"summary\": string,\n      \"link\": string\n    }\n  ]\n}\n\nAdditional constraints:\n- \"materials\" and \"blogs\" must always be arrays.\n- Include only documents that are directly relevant to the user's question.\n- If no documents are relevant at all, return an empty array for both \"materials\" and \"blogs\", and keep \"answer\" concise and based only on retrieved content (or empty if nothing is retrieved).\n",
        "pineconeIndex": {
          "__rl": true,
          "value": "woorifisa-lectures",
          "mode": "list",
          "cachedResultName": "woorifisa-lectures"
        },
        "topK": 5,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [
        2304,
        3684
      ],
      "id": "12fdf39b-fe7a-4540-ae8e-3cb9379de1b6",
      "name": "lecture store(read)1",
      "credentials": {
        "pineconeApi": {
          "id": "8JRWuWhSq8WbHWLf",
          "name": "PineconeApi account"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "ìˆ˜ì—… êµì•ˆìë£Œ\n",
        "pineconeIndex": {
          "__rl": true,
          "value": "woorifisa-blogs",
          "mode": "list",
          "cachedResultName": "woorifisa-blogs"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [
        2592,
        3684
      ],
      "id": "4c51c9b3-2e53-44d7-aa82-bad311ff6355",
      "name": "blog store(read)1",
      "credentials": {
        "pineconeApi": {
          "id": "8JRWuWhSq8WbHWLf",
          "name": "PineconeApi account"
        }
      }
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "weeks"
            }
          ]
        }
      },
      "id": "bb6d2ad8-aedf-4275-95ed-80708086cb75",
      "name": "ë§¤ì£¼ ì›”ìš”ì¼ 9ì‹œ",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.1,
      "position": [
        1024,
        3460
      ]
    },
    {
      "parameters": {
        "resource": "Agent",
        "operation": "agent",
        "prompt": "Search Instructions:\n\n1. Perform a web search using Google.\n2. Set the search region to South Korea (KR).\n3. Use the following search query:\n   \"ìš°ë¦¬FISA í´ë¼ìš°ë“œ ì—”ì§€ë‹ˆì–´ë§ site:tistory.com\"\n\nTarget Platform Rules:\n\n- Only include blog posts hosted on Tistory subdomains.\n- Valid URLs must match the pattern:\n  https://*.tistory.com/*\n- The root domain https://www.tistory.com itself is NOT a valid blog post source.\n\nSelection Rules:\n\n- Select up to 10 blog posts.\n- Sort results by published date, newest first.\n- There is no restriction on the publication date range.\n\nExclusion Rules:\n\n- Exclude the following:\n  - https://www.tistory.com/*\n  - Non-blog pages\n  - Category, tag, archive, or search result pages\n  - Index or listing pages\n  - Duplicate posts (deduplicate by canonical URL)\n\nCrawling Rules:\n\n- Each selected URL must represent a single, individual blog post.\n- Crawl each blog post page individually.\n\nContent Extraction Rules (per blog post):\n\nExtract the following fields:\n\n- title:\n  - The blog post title as displayed on the page\n\n- body_text:\n  - Extract the full readable article text only\n  - Exclude advertisements, navigation UI, sidebars, headers, footers, and comments\n  - Preserve the original text order\n\n- tags:\n  - List of tags associated with the post, if available\n\n- source_url:\n  - The original canonical URL of the blog post\n\n- published_date:\n  - The publication date as displayed on the page",
        "schemaType": "manual",
        "schema": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"tistory_posts\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"required\": [\n          \"title\",\n          \"source_url\",\n          \"published_date\",\n          \"body_text\",\n          \"tags\"\n        ],\n        \"properties\": {\n          \"title\": {\n            \"type\": \"string\"\n          },\n          \"source_url\": {\n            \"type\": \"string\"\n          },\n          \"published_date\": {\n            \"type\": \"string\",\n            \"description\": \"Post publication date as shown on the original Tistory page (e.g. 2024-03-12)\"\n          },\n          \"body_text\": {\n            \"type\": \"string\",\n            \"description\": \"Full body text of the post. The publication date should also be included at the top of this text.\"\n          },\n          \"tags\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"type\": \"string\"\n            }\n          }\n        },\n        \"additionalProperties\": false\n      }\n    }\n  },\n  \"required\": [\"tistory_posts\"],\n  \"additionalProperties\": false\n}\n",
        "requestOptions": {}
      },
      "type": "@mendable/n8n-nodes-firecrawl.firecrawl",
      "typeVersion": 1,
      "position": [
        1248,
        1936
      ],
      "id": "604879ac-d652-4132-8b1c-29b945e41e77",
      "name": "Agent - AI-powered web data extraction (waits for completion)",
      "credentials": {
        "firecrawlApi": {
          "id": "5QKfzx8wbWPws6B3",
          "name": "Firecrawl account"
        }
      }
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $json.output[0].id }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryRedisChat",
      "typeVersion": 1.5,
      "position": [
        2176,
        3684
      ],
      "id": "c53bf0b7-d4b5-4755-814c-4e0204b19219",
      "name": "Redis Chat Memory1",
      "credentials": {
        "redis": {
          "id": "HN8PIYrmFU9GgbGF",
          "name": "Redis account"
        }
      }
    },
    {
      "parameters": {
        "operation": "select",
        "table": {
          "__rl": true,
          "value": "fisa_chat_histories",
          "mode": "list",
          "cachedResultName": "fisa_chat_histories"
        },
        "limit": 7,
        "sort": {
          "values": [
            {
              "column": "created_at",
              "direction": "DESC"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.5,
      "position": [
        1248,
        3460
      ],
      "id": "411d96c3-90b4-4f80-9729-c5be69a3cb4a",
      "name": "Select rows from a table1",
      "alwaysOutputData": true,
      "credentials": {
        "mySql": {
          "id": "DHP9uh7a5FDPRcqk",
          "name": "MySQL account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "function parseQuizResponse(rawText) {\n  const text = rawText\n    .replace(/\\r/g, \"\")\n    .replace(/\\u00a0/g, \" \")\n    .trim();\n\n  const result = {\n    title: \"ì´ë²ˆ ì£¼ ë³µìŠµ í€´ì¦ˆ\",\n    description: \"\",\n    questions: []\n  };\n\n  /* ---------------- description ---------------- */\n\n  const descMatch = text.match(/##[\\s\\S]*?\\n([\\s\\S]*?)---/);\n  if (descMatch) {\n    result.description = descMatch[1].replace(/\\n+/g, \" \").trim();\n  }\n\n  /* ---------------- ë¬¸ì œ / ì •ë‹µ ë¶„ë¦¬ ---------------- */\n\n  const [questionPart, answerPart = \"\"] = text.split(/##\\s*âœ…\\s*ì •ë‹µ/);\n\n  /* ---------------- ì •ë‹µ ë§µ ---------------- */\n\n  const answerMap = {};\n  const answerRegex =\n    /\\*\\*\\s*Q(\\d+)\\s*ì •ë‹µ\\s*:\\s*([^\\n]+)[\\s\\S]*?ğŸ‘‰\\s*(.+?)(?=\\n\\n|\\n\\*|$)/g;\n\n  let am;\n  while ((am = answerRegex.exec(answerPart))) {\n    answerMap[`Q${am[1]}`] = {\n      answer: am[2].trim(),\n      explanation: am[3].trim()\n    };\n  }\n\n  /* ---------------- ë¬¸ì œ ë¸”ë¡ íŒŒì‹± ---------------- */\n\n  const questionBlockRegex =\n    /###\\s*\\[Q(\\d+)\\][\\s\\S]*?(?=###\\s*\\[Q\\d+\\]|##\\s*âœ…|$)/g;\n\n  let qm;\n  while ((qm = questionBlockRegex.exec(questionPart))) {\n    const block = qm[0];\n    const id = `Q${qm[1]}`;\n\n    const lines = block.split(\"\\n\").map(l => l.trim());\n\n    const options = [];\n    let questionText = \"\";\n    let hint = null;\n\n    lines.forEach(line => {\n      if (/^\\d+\\)/.test(line)) {\n        options.push(line.replace(/^\\d+\\)\\s*/, \"\"));\n      } else if (line.startsWith(\">\") && line.includes(\"íŒíŠ¸\")) {\n        hint = line.replace(/^>?\\s*íŒíŠ¸:\\s*/, \"\");\n      } else if (\n        line &&\n        !line.startsWith(\"###\") &&\n        !line.startsWith(\"-\") &&\n        !line.includes(\"íŒíŠ¸\")\n      ) {\n        questionText += (questionText ? \" \" : \"\") + line;\n      }\n    });\n\n    let type = \"short_answer\";\n    if (options.length === 4) type = \"multiple_choice\";\n    else if (questionText.includes(\"O/X\")) type = \"ox_scenario\";\n\n    const answerInfo = answerMap[id] || { answer: null, explanation: null };\n\n    result.questions.push({\n      id,\n      type,\n      question: questionText.trim(),\n      ...(options.length ? { options } : {}),\n      ...(hint ? { hint } : {}),\n      answer: answerInfo.answer,\n      explanation: answerInfo.explanation\n    });\n  }\n\n  return result;\n}\n\n\n/* n8n / Node.js usage */\nreturn [parseQuizResponse($input.first().json.output)].map(quiz => ({\n  ...quiz,\n  questions: quiz.questions.map(q => ({\n    ...q,\n    answer: q.answer ? q.answer.replace(/^\\*\\*\\s*/, \"\") : null\n  }))\n}));\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2960,
        3556
      ],
      "id": "da2f6865-043d-4c10-948f-85ac0f2414a0",
      "name": "Code in JavaScript3"
    },
    {
      "parameters": {
        "table": {
          "__rl": true,
          "value": "fisa_quiz_questions",
          "mode": "list",
          "cachedResultName": "fisa_quiz_questions"
        },
        "dataMode": "defineBelow",
        "valuesToSend": {
          "values": [
            {
              "column": "question_id",
              "value": "={{ $json.id }}"
            },
            {
              "column": "type",
              "value": "={{ $json.type }}"
            },
            {
              "column": "question",
              "value": "={{ $json.question }}"
            },
            {
              "column": "explanation",
              "value": "={{ $json.explanation }}"
            },
            {
              "column": "answer",
              "value": "={{ $json.answer }}"
            },
            {
              "column": "options",
              "value": "={{ JSON.stringify($json.options) }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.5,
      "position": [
        3632,
        3556
      ],
      "id": "15e418e5-1b60-4122-a5e0-79cfe975ac2d",
      "name": "Insert rows in a table2",
      "credentials": {
        "mySql": {
          "id": "DHP9uh7a5FDPRcqk",
          "name": "MySQL account"
        }
      }
    },
    {
      "parameters": {
        "select": "channel",
        "channelId": {
          "__rl": true,
          "value": "YOUR_SLACK_CHANNEL_ID",
          "mode": "list"
        },
        "text": "=ğŸš€ **ì´ë²ˆ ì£¼ ë³µìŠµ í€´ì¦ˆê°€ ë„ì°©í–ˆìŠµë‹ˆë‹¤!**\n\n{{ $json.output }}\n\nì •ë‹µì„ ì•„ì‹œëŠ” ë¶„ì€ ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì„¸ìš”! ğŸ”¥",
        "otherOptions": {
          "includeLinkToWorkflow": false
        }
      },
      "id": "db47e191-faec-4bf1-9451-f4039bea208e",
      "name": "ìŠ¬ë™ í€´ì¦ˆ ë°œì†¡",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.1,
      "position": [
        2960,
        3364
      ],
      "webhookId": "6dddf171-369b-49aa-beeb-0c29beff4541",
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "// Loop over input items and add a new field called 'myNewField' to the JSON of each one\nfor (const item of $input.all()) {\n  if(!item.json.questions){\n    item.json.questions = [];\n  }\n}\n\nreturn $input.all();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1472,
        3460
      ],
      "id": "09720dcb-59c4-44e3-827c-4acfb1816288",
      "name": "Code in JavaScript4"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1",
          "mode": "list",
          "cachedResultName": "GPT-4.1"
        },
        "responses": {
          "values": [
            {
              "content": "=### INPUT DATA:\n{{ $json[\"questions\"] }}\n\n### TASK:\nAnalyze the input and output a structured technical summary.\n\n### GUIDELINES:\n1. TOPICS: Identify the 3 most discussed technical categories.\n2. KEYWORDS: Extract 5-7 specific technical terms or commands.\n3. CONTEXT: Summarize the main technical challenge students faced this week in 2 sentences.\n\n### OUTPUT FORMAT:\nCore_Topics: <topic1, topic2, topic3>\nKey_Keywords: <key1, key2, key3, key4, key5>\nTechnical_Summary: <Your 2-sentence summary here>\n\n### FILTER:\nImmediately discard any data related to \"schedules\", \"lunch\", \"links\", or \"personal talk\"."
            }
          ]
        },
        "builtInTools": {},
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 2.1,
      "position": [
        1696,
        3460
      ],
      "id": "34388397-034c-46d1-bc4a-32d0007e9382",
      "name": "Message a model",
      "credentials": {
        "openAiApi": {
          "id": "VIaNxQPub35oMAIA",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "fieldToSplitOut": "questions",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        3184,
        3556
      ],
      "id": "265957c2-a509-48c6-881d-c0657fbceaec",
      "name": "Split Out3"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        3408,
        3556
      ],
      "id": "01c75ad1-fcd3-4440-9780-2dcac71ebc56",
      "name": "Loop Over Items"
    }
  ],
  "pinData": {},
  "connections": {
    "Chatbot": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "í¬ë¡¤ë§ ê²°ê³¼ íŒë‹¨(Notion êµì•ˆ)": {
      "main": [
        [
          {
            "node": "Split Out2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì£¼ê°„ í¬ë¡¤ëŸ¬": {
      "main": [
        [
          {
            "node": "velog í¬ë¡¤ëŸ¬",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì¼ê°„ í¬ë¡¤ëŸ¬": {
      "main": [
        [
          {
            "node": "í¬ë¡¤ë§url ì¡°íšŒ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out": {
      "main": [
        [
          {
            "node": "ì €ë²ˆì£¼ ë°ì´í„°ë§Œ í•„í„°(ì„ì‹œ 1ë…„)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ìƒì„¸ì •ë³´ ê°€ì ¸ì˜¤ê¸°": {
      "main": [
        [
          {
            "node": "HTML íƒœê·¸ ì œê±°",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "1ê°œì”©",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "1ê°œì”©": {
      "main": [
        [],
        [
          {
            "node": "ì¤‘ë³µ ë°ì´í„° í™•ì¸",
            "type": "main",
            "index": 0
          },
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "ì£¼ê°„ í¬ë¡¤ëŸ¬1": {
      "main": [
        [
          {
            "node": "Agent - AI-powered web data extraction (waits for completion)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTML íƒœê·¸ ì œê±°": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "ë¸”ë¡œê·¸ ìŠ¤í† ì–´ ì €ì¥2",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "Chatbot",
            "type": "main",
            "index": 0
          },
          {
            "node": "Merge1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "êµì•ˆ ìŠ¤í† ì–´": {
      "main": [
        [
          {
            "node": "Insert rows in a table1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader1": {
      "ai_document": [
        [
          {
            "node": "êµì•ˆ ìŠ¤í† ì–´",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Chatbot",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "ë¸”ë¡œê·¸ ìŠ¤í† ì–´ ì €ì¥2",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI1": {
      "ai_embedding": [
        [
          {
            "node": "êµì•ˆ ìŠ¤í† ì–´",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items2": {
      "main": [
        [],
        [
          {
            "node": "Code in JavaScript1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript1": {
      "main": [
        [
          {
            "node": "êµì•ˆ ìŠ¤í† ì–´",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI2": {
      "ai_embedding": [
        [
          {
            "node": "lecture store(read)",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI3": {
      "ai_embedding": [
        [
          {
            "node": "blog store(read)",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "lecture store(read)": {
      "ai_tool": [
        [
          {
            "node": "Chatbot",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "blog store(read)": {
      "ai_tool": [
        [
          {
            "node": "Chatbot",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "0ê°œ ì´ìƒ1": {
      "main": [
        [
          {
            "node": "1ê°œì”©1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "1ê°œì”©1": {
      "main": [
        [],
        [
          {
            "node": "ì¤‘ë³µ ë°ì´í„° í™•ì¸1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì„ë² ë”© ë¬¸ì„œ ìµœì í™”": {
      "main": [
        [
          {
            "node": "ì„ë² ë”© ì¶”ì¶œ2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì„ë² ë”© ë¬¸ì„œ ìµœì í™” 2": {
      "main": [
        [
          {
            "node": "ì„ë² ë”© ì¶”ì¶œ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI4": {
      "ai_embedding": [
        [
          {
            "node": "ë¸”ë¡œê·¸ store(ì €ì¥)",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader2": {
      "ai_document": [
        [
          {
            "node": "ë¸”ë¡œê·¸ store(ì €ì¥)",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "ì €ë²ˆì£¼ ë°ì´í„°ë§Œ í•„í„°(ì„ì‹œ 1ë…„)": {
      "main": [
        [
          {
            "node": "0ê°œ ì´ìƒ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì €ë²ˆì£¼ ë°ì´í„°ë§Œ í•„í„°(ì„ì‹œ 1ë…„)2": {
      "main": [
        [
          {
            "node": "0ê°œ ì´ìƒ1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out1": {
      "main": [
        [
          {
            "node": "ì €ë²ˆì£¼ ë°ì´í„°ë§Œ í•„í„°(ì„ì‹œ 1ë…„)2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì„ë² ë”© ì¶”ì¶œ": {
      "main": [
        [
          {
            "node": "ë¸”ë¡œê·¸ store(ì €ì¥)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì„ë² ë”© ì¶”ì¶œ2": {
      "main": [
        [
          {
            "node": "ë¸”ë¡œê·¸ ìŠ¤í† ì–´ ì €ì¥2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ë¸”ë¡œê·¸ store(ì €ì¥)": {
      "main": [
        [
          {
            "node": "ë¸”ë¡œê·¸ í¬ë¡¤ë§ ì •ë³´ ì €ì¥1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ë¸”ë¡œê·¸ ìŠ¤í† ì–´ ì €ì¥2": {
      "main": [
        [
          {
            "node": "ë¸”ë¡œê·¸ í¬ë¡¤ë§ ì •ë³´ ì €ì¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "velog í¬ë¡¤ëŸ¬": {
      "main": [
        [
          {
            "node": "Split Out",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Merge1": {
      "main": [
        [
          {
            "node": "Insert rows in a table",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Redis Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "Chatbot",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Select rows from a table in MySQL": {
      "ai_tool": [
        [
          {
            "node": "Chatbot",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "0ê°œ ì´ìƒ": {
      "main": [
        [
          {
            "node": "1ê°œì”©",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì¤‘ë³µ ë°ì´í„° í™•ì¸": {
      "main": [
        [
          {
            "node": "ì¤‘ë³µì´ ì•„ë‹Œ ê²½ìš°",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ë¸”ë¡œê·¸ í¬ë¡¤ë§ ì •ë³´ ì €ì¥": {
      "main": [
        [
          {
            "node": "1ê°œì”©",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì¤‘ë³µì´ ì•„ë‹Œ ê²½ìš°": {
      "main": [
        [
          {
            "node": "ìƒì„¸ì •ë³´ ê°€ì ¸ì˜¤ê¸°",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "1ê°œì”©",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì¤‘ë³µ ë°ì´í„° í™•ì¸1": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "ì„ë² ë”© ë¬¸ì„œ ìµœì í™” 2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "1ê°œì”©1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ë¸”ë¡œê·¸ í¬ë¡¤ë§ ì •ë³´ ì €ì¥1": {
      "main": [
        [
          {
            "node": "1ê°œì”©1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Insert rows in a table1": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "êµì•ˆ ë…¸ì…˜ í¬ë¡¤ëŸ¬": {
      "main": [
        [
          {
            "node": "í¬ë¡¤ë§ ê²°ê³¼ íŒë‹¨(Notion êµì•ˆ)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out2": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript2": {
      "main": [
        [
          {
            "node": "êµì•ˆ ë…¸ì…˜ í¬ë¡¤ëŸ¬",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "ì„ë² ë”© ë¬¸ì„œ ìµœì í™”",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "í˜„ì¬ë‚ ì§œ ë°˜í™˜": {
      "ai_tool": [
        [
          {
            "node": "Chatbot",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "í¬ë¡¤ë§url ì¡°íšŒ": {
      "main": [
        [
          {
            "node": "Code in JavaScript2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Chatbot1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI5": {
      "ai_embedding": [
        [
          {
            "node": "lecture store(read)1",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI6": {
      "ai_embedding": [
        [
          {
            "node": "blog store(read)1",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "lecture store(read)1": {
      "ai_tool": [
        [
          {
            "node": "Chatbot1",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "blog store(read)1": {
      "ai_tool": [
        [
          {
            "node": "Chatbot1",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "ë§¤ì£¼ ì›”ìš”ì¼ 9ì‹œ": {
      "main": [
        [
          {
            "node": "Select rows from a table1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Agent - AI-powered web data extraction (waits for completion)": {
      "main": [
        [
          {
            "node": "Split Out1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Redis Chat Memory1": {
      "ai_memory": [
        [
          {
            "node": "Chatbot1",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Select rows from a table1": {
      "main": [
        [
          {
            "node": "Code in JavaScript4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Chatbot1": {
      "main": [
        [
          {
            "node": "Code in JavaScript3",
            "type": "main",
            "index": 0
          },
          {
            "node": "ìŠ¬ë™ í€´ì¦ˆ ë°œì†¡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript3": {
      "main": [
        [
          {
            "node": "Split Out3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript4": {
      "main": [
        [
          {
            "node": "Message a model",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Message a model": {
      "main": [
        [
          {
            "node": "Chatbot1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out3": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [],
        [
          {
            "node": "Insert rows in a table2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Insert rows in a table2": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "versionId": "e6413a56-c8b7-4834-a1b6-6eb17bcb9851",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "a3417737af2031ff8ab51b039c477e238c317daecd09edf48b8c0f91b5c7f445"
  },
  "id": "h8bMfmtrz_r6uzchP4PZC",
  "tags": []
}