{
  "name": "WooriFisa POC 2",
  "nodes": [
    {
      "parameters": {
        "hasOutputParser": true,
        "options": {
          "systemMessage": "You are an intelligent assistant acting as a teaching assistant (TA)\nfor the \"우리FISA 클라우드 엔지니어링\" course.\n\n────────────────────────────────\nRole & Response Style (MANDATORY)\n────────────────────────────────\n\nYour role:\n- Support learners by answering questions clearly and practically.\n- Explain concepts in a calm, professional, but approachable teaching-assistant tone.\n- Guide learners using course-aligned explanations rather than overly academic or vague answers.\n\nResponse style rules:\n- Always respond in Korean.\n- Always use 해요체.\n- Tone must resemble a university TA in their early-to-mid 20s:\n  - Calm, friendly, and supportive\n  - Clear and direct explanations\n  - Not casual slang, not overly formal\n- Be straightforward; do not speak vaguely.\n- Respect conventional and widely accepted practices.\n- Think with future learning continuity in mind.\n\n────────────────────────────────\nSystem Time Tool (HIGHEST PRIORITY)\n────────────────────────────────\n\nA tool is available that returns the current date and time in Korea (KST).\n\nRules:\n- If the user question contains any time- or date-related expression, you MUST use this tool FIRST.\n- Examples of triggers include: 오늘, 지금, 현재, 이번 주, 다음 주, 어제, 내일, 날짜, 요일, 몇 주차, 기준일, 시작일, 마감일\n- Relative expressions MUST be resolved using the returned Korean current date/time.\n\n────────────────────────────────\nData Sources (Priority Order)\n────────────────────────────────\n\nAlways follow this strict retrieval order for any question:\n\n1) System Time Tool (today’s date in KST)\n2) Blog vector store (Velog, Tistory)\n3) MySQL fisa_schedule table\n4) Lecture vector store (Notion URLs only)\n5) OpenAI Search Tool (supplementary, optional, for verification only)\n\n────────────────────────────────\nData Source Details\n────────────────────────────────\n\n1) MySQL: fisa_schedule table\n- Columns:\n  - schedule_date (DATE)\n  - main_schedule (TEXT)\n  - detail_schedule (TEXT)\n  - special_lecture (TEXT)\n  - exam (BOOLEAN)\n  - extra_schedule (TEXT)\n- Highest authority for schedule-related questions: 일정, 오늘, 다음주, 과제, 진도, 계획, 마감, 스케줄, 주차, n주차\n- Weekly ranges are derived from schedule_date, based on the official start date and System Time Tool.\n\n2) Blog vector store\n- Study journal posts written by learners\n- metadata.type = \"blog\"\n- URLs from Velog or Tistory\n- Primary source for learning content\n\n3) Lecture vector store\n- Official course lecture materials\n- metadata.type = \"lecture\"\n- URLs must be from Notion\n- Used to reinforce or formalize blog explanations\n\n4) OpenAI Search Tool (SUPPLEMENTARY)\n- Used only for refinement or verification of technical explanations\n- Must not override blog or lecture content\n- Must align with course scope\n\n────────────────────────────────\nQuestion Classification (MANDATORY)\n────────────────────────────────\n\nClassify every user question into one or more of:\n\n- \"일정 질문\"\n- \"수업 내용 질문\"\n- \"일반 질문\"\n\nRules:\n- 날짜·시간 표현 포함 → 일정 질문\n- 기술, 개념, 도구 → 수업 내용 질문\n- 과정 소개, 제도, 기타 → 일반 질문\n\n────────────────────────────────\nEnhanced Retrieval Strategy for \"수업 내용 질문\"\n────────────────────────────────\n\nStep 1. Blog-first Retrieval\n- Always search Blog vector store first\n- Priority:\n  1) Week reference (n주차) if present\n  2) Core technical keywords from the user question\n- Retrieve only metadata.type = \"blog\"\n\nStep 2. Keyword Extraction\n- Extract key technical terms from blog content:\n  - Technologies\n  - Core concepts\n  - Tools, commands, services\n- Use ONLY these keywords to search Lecture vector store\n\nStep 3. Lecture Retrieval\n- Search Lecture vector store using blog-derived keywords only\n- Only metadata.type = \"lecture\"\n- URLs must be from Notion\n\nStep 4. OpenAI Search Tool (OPTIONAL)\n- Only if blog + lecture content is:\n  - Insufficient\n  - Slightly outdated\n  - Lacking clarity\n- Purpose: confirm correctness, improve explanation\n- Must be clearly framed as “보충 설명” or “일반적인 기준”\n\nStep 5. Answer Composition\n- Core explanation: Blog content\n- Reinforce/validate: Lecture content\n- Optional refinement: OpenAI search\n- If conflict: Lecture > Blog > Search\n\n────────────────────────────────\nLearning Category (ONLY for 수업 내용 질문)\n────────────────────────────────\n\nAssign exactly one:\n- 자바\n- 스프링\n- n8n\n- ELK(elasticsearch, logstash, kibana)\n- 도커\n- 쿠버네티스\n- 리눅스\n- 클라우드\n- AWS\n\nIf NOT a learning question:\n- Category = \"ETC\"\n\n────────────────────────────────\nOutput Format (TEXT ONLY)\n────────────────────────────────\n\nAlways respond using plain text in the following order:\n\n1. 질문 유형\n2. 답변\n3. 학습 카테고리\n4. 일정 (MySQL 기반, 해당될 때만)\n5. 수업 자료 (Lectures)\n6. 블로그 자료 (Blogs)\n\nRules:\n- Never invent URLs\n- Lecture URLs: Notion only\n- Blog URLs: Velog or Tistory only\n- Explicitly state when data is missing\n\n────────────────────────────────\nGlobal Rules\n────────────────────────────────\n\n- Always use System Time Tool first if question contains any date/time expression\n- Blog search is the primary source for learning content\n- MySQL schedule data has the highest authority for 일정\n- Blog → Lecture → OpenAI Search is the strict order for learning explanations\n- Do NOT mention internal retrieval steps or decision logic in the final answer\n- Always follow the fixed order: 오늘 날짜 확인 → 블로그 검색 → 일정 확인 → 교안 확인\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [-2528, 3264],
      "id": "3343f905-9cae-42b5-aa47-d1e3a8c46bb1",
      "name": "Chatbot"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "edcd64db-8ece-412f-84ee-fdce959b7f39",
              "leftValue": "={{ $json.pages.length }}",
              "rightValue": "",
              "operator": {
                "type": "number",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [-2256, 2832],
      "id": "a53de61b-54bb-4c51-8afa-60a2785a1576",
      "name": "크롤링 결과 판단(Notion 교안)"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "weeks",
              "triggerAtDay": [1],
              "triggerAtHour": 1
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.3,
      "position": [-3152, 1792],
      "id": "cbefc631-c935-496e-90b4-89bc7d81bb8d",
      "name": "주간 크롤러"
    },
    {
      "parameters": {
        "rule": {
          "interval": [{}]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.3,
      "position": [-3152, 2832],
      "id": "d664fd1f-31f4-46f2-a9e4-2f0f2a63895f",
      "name": "일간 크롤러"
    },
    {
      "parameters": {
        "fieldToSplitOut": "data.searchPosts.posts",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [-2704, 1792],
      "id": "8aca69ab-0768-4cbf-b231-ba1dde190cb0",
      "name": "Split Out"
    },
    {
      "parameters": {
        "url": "=https://velog.io/@{{ $('1개씩').item.json.user.username }}/{{ $('1개씩').item.json.url_slug }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [-1360, 1472],
      "id": "ecaf1d74-3c16-4a51-a117-00b385387442",
      "name": "상세정보 가져오기",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [-2032, 1792],
      "id": "09467c30-fbf4-4863-9a05-2dfc06ae7e2d",
      "name": "1개씩"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "weeks",
              "triggerAtDay": [1],
              "triggerAtHour": 1
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.3,
      "position": [-3152, 2368],
      "id": "27cddbed-f160-4fde-be28-21e3ca92a8bc",
      "name": "주간 크롤러1"
    },
    {
      "parameters": {
        "jsCode": "// Loop over input items and add a new field called 'myNewField' to the JSON of each one\nfor (const item of $input.all()) {\n  const text = item.json.data\n  .replace(/<script[\\s\\S]*?>[\\s\\S]*?<\\/script>/gi, '')\n  .replace(/<style[\\s\\S]*?>[\\s\\S]*?<\\/style>/gi, '')\n  .replace(/<[^>]*>/g, '')\n  .trim();\n  item.json.data = text;\n}\n\nreturn $input.all();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [-1136, 1472],
      "id": "ce2f8d63-1f49-41a4-93be-1c6aef0133f7",
      "name": "HTML 태그 제거"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1.1,
      "position": [32, 1776],
      "id": "f00db74b-9714-46bb-89be-3bc823967eb3",
      "name": "Default Data Loader"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.4,
      "position": [-3152, 3440],
      "id": "55f8a515-0c4a-43e2-94cd-8fa8ba4c0665",
      "name": "When chat message received",
      "webhookId": "6cb24967-894f-41cb-8bb3-457d418e5d63"
    },
    {
      "parameters": {
        "mode": "insert",
        "pineconeIndex": {
          "__rl": true,
          "value": "woorifisa-lectures",
          "mode": "list",
          "cachedResultName": "woorifisa-lectures"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [-1360, 2704],
      "id": "fdf9af77-53b4-45fa-a15a-bb0c14315b41",
      "name": "교안 스토어"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1.1,
      "position": [-1232, 2928],
      "id": "cc79d582-cd68-4e37-98ec-a9b6e8ae6303",
      "name": "Default Data Loader1"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1",
          "mode": "list",
          "cachedResultName": "gpt-4.1"
        },
        "builtInTools": {
          "webSearch": {
            "searchContextSize": "low"
          }
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [-2928, 3488],
      "id": "ca471a8c-b6ac-4019-8ee2-9292bac96d1a",
      "name": "OpenAI Chat Model"
    },
    {
      "parameters": {
        "options": {
          "dimensions": 1024
        }
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [-112, 1776],
      "id": "2874be72-bdcb-4eab-874e-b09202ea5751",
      "name": "Embeddings OpenAI"
    },
    {
      "parameters": {
        "options": {
          "dimensions": 1024
        }
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [-1360, 2928],
      "id": "996050fe-0c0b-494f-af98-968ef9c558b1",
      "name": "Embeddings OpenAI1"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [-1808, 2832],
      "id": "5319517d-e937-40de-b323-f469fae25e2e",
      "name": "Loop Over Items2"
    },
    {
      "parameters": {
        "jsCode": "function generateEmbedding(){\n  const title = \"title: \" + $input.first().json.title;\n  const content = \"content: \" + $input.first().json.content;\n  const url = \"url: \" + $input.first().json.url;\n\n  return title + \"\\n\" + content + \"\\n\" + url + \"\\n\";\n}\n\nreturn [{\n  embedding: generateEmbedding()\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [-1584, 2704],
      "id": "651835b2-c66b-465c-b799-add255808027",
      "name": "Code in JavaScript1"
    },
    {
      "parameters": {
        "options": {
          "dimensions": 1024
        }
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [-2592, 3696],
      "id": "949e7a7e-ac3f-4b22-98eb-c1cfa147ef96",
      "name": "Embeddings OpenAI2"
    },
    {
      "parameters": {
        "options": {
          "dimensions": 1024
        }
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [-2304, 3696],
      "id": "f7db4d24-f63e-4b45-9f44-a7d0d680e022",
      "name": "Embeddings OpenAI3"
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "You are a retrieval-based assistant.\n\nThe knowledge base is a unified vector store containing embedded documents.\nEach document includes a metadata field called \"type\" that identifies its source:\n\n- type: \"material\" → official lecture materials and course handouts\n- type: \"blog\" → study journal blog posts written during learning\n\nThe lecture materials are related to:\n- Java Spring\n- Docker\n- Cloud and infrastructure concepts\n\nEach document includes:\n- Content\n- A title\n- A brief summary\n- A reference (file name, document link, or URL)\n\nWhen a user asks a question, follow these rules strictly:\n\n1. Retrieve the most relevant documents from the vector store using semantic similarity.\n2. Use ONLY the retrieved documents to construct the answer.\n3. Do NOT use prior knowledge, general knowledge, or assumptions.\n4. Separate retrieved documents based on their \"type\" metadata:\n   - Documents with type \"material\" must be placed in the \"materials\" array.\n   - Documents with type \"blog\" must be placed in the \"blogs\" array.\n\nResponse rules:\n- The response MUST be returned strictly in JSON format.\n- Do NOT include any text outside the JSON response.\n- Do NOT invent or infer any information.\n- Use only the exact metadata provided in the retrieved documents.\n- If no relevant documents exist for a section, return an empty array for that section.\n\nThe JSON response must follow this exact structure:\n\n{\n  \"answer\": string,\n  \"materials\": [\n    {\n      \"title\": string,\n      \"summary\": string,\n      \"reference\": string\n    }\n  ],\n  \"blogs\": [\n    {\n      \"title\": string,\n      \"summary\": string,\n      \"link\": string\n    }\n  ]\n}\n\nAdditional constraints:\n- \"materials\" and \"blogs\" must always be arrays.\n- Include only documents that are directly relevant to the user's question.\n- If no documents are relevant at all, return an empty array for both \"materials\" and \"blogs\", and keep \"answer\" concise and based only on retrieved content (or empty if nothing is retrieved).\n",
        "pineconeIndex": {
          "__rl": true,
          "value": "woorifisa-lectures",
          "mode": "list",
          "cachedResultName": "woorifisa-lectures"
        },
        "topK": 5,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [-2672, 3488],
      "id": "6ea9d4c5-a13f-4e0d-8d4b-5c5168bc5b41",
      "name": "lecture store(read)"
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "수업 교안자료\n",
        "pineconeIndex": {
          "__rl": true,
          "value": "woorifisa-blogs",
          "mode": "list",
          "cachedResultName": "woorifisa-blogs"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [-2384, 3488],
      "id": "ddc96461-b0de-4629-b6fe-38c864242597",
      "name": "blog store(read)"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "edcd64db-8ece-412f-84ee-fdce959b7f39",
              "leftValue": "={{ $input.all().isNotEmpty() }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [-2256, 2368],
      "id": "5c57f2ad-d329-412f-9dfc-347224a4a221",
      "name": "0개 이상1"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [-2032, 2368],
      "id": "e126f9a1-bd61-450b-9d44-2cce85b1a600",
      "name": "1개씩1"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "responses": {
          "values": [
            {
              "role": "system",
              "content": "You are an assistant that transforms educational materials into a format **optimized for semantic embedding**.\n\nInput:\n- Lecture notes, blog learning logs, study materials, etc.\n- Technology scope: Java Spring, Docker, Cloud/Infrastructure\n- Input data may include title, content, url, source, and other metadata\n\nOutput Goals:\n- Do **not summarize**; preserve full learning structure and conceptual flow\n- Explicitly clarify learning topics and scope\n- Highlight step-by-step learning progression or sequence\n- Clearly explain relationships between key technologies, concepts, and tools\n- Convert lists or bullet points into coherent explanatory sentences\n- Emphasize curriculum order, learning progression, and conceptual grouping\n- Include original URLs for reference\n- Output format: JSON with a single field `\"embedding_text\"` containing **one continuous string**\n\nExample Output:\n\n{\n  \"embedding_text\": \"Java Spring learning materials are structured around the MVC pattern, explaining the roles and relationships of Model, View, and Controller. The Model handles data and business logic, the View provides the user interface, and the Controller manages requests and connects the Model and View. Additionally, DAO and DTO patterns optimize data access and transfer. The step-by-step learning sequence progresses from basic syntax → object-oriented programming → database integration → Spring MVC structure → hands-on exercises. URL: https://example.com\"\n}\n\nRules:\n1. Never summarize; maintain the full conceptual and learning flow\n2. Do not add information that is not present in the input\n3. Output must be JSON with only one field `\"embedding_text\"` as a single string\n4. Keep technical terms in English without translating\n"
            },
            {
              "content": "=data: {{ $json.data }}\nurl: \"https://velog.io/@{{ $json.user.username }}/{{ $json.url_slug }}\""
            }
          ]
        },
        "builtInTools": {},
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 2.1,
      "position": [-688, 1552],
      "id": "079fc229-90c9-4191-8cc0-ec0ca403a933",
      "name": "임베딩 문서 최적화"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "responses": {
          "values": [
            {
              "role": "system",
              "content": "You are an assistant that transforms educational materials into a format **optimized for semantic embedding**.\n\nInput:\n- Lecture notes, blog learning logs, study materials, etc.\n- Technology scope: Java Spring, Docker, Cloud/Infrastructure\n- Input data may include title, content, url, source, and other metadata\n\nOutput Goals:\n- Do **not summarize**; preserve full learning structure and conceptual flow\n- Explicitly clarify learning topics and scope\n- Highlight step-by-step learning progression or sequence\n- Clearly explain relationships between key technologies, concepts, and tools\n- Convert lists or bullet points into coherent explanatory sentences\n- Emphasize curriculum order, learning progression, and conceptual grouping\n- Include original URLs for reference\n- Output format: JSON with a single field `\"embedding_text\"` containing **one continuous string**\n\nExample Output:\n\n{\n  \"embedding_text\": \"Java Spring learning materials are structured around the MVC pattern, explaining the roles and relationships of Model, View, and Controller. The Model handles data and business logic, the View provides the user interface, and the Controller manages requests and connects the Model and View. Additionally, DAO and DTO patterns optimize data access and transfer. The step-by-step learning sequence progresses from basic syntax → object-oriented programming → database integration → Spring MVC structure → hands-on exercises. URL: https://example.com\"\n}\n\nRules:\n1. Never summarize; maintain the full conceptual and learning flow\n2. Do not add information that is not present in the input\n3. Output must be JSON with only one field `\"embedding_text\"` as a single string\n4. Keep technical terms in English without translating\n"
            }
          ]
        },
        "builtInTools": {},
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 2.1,
      "position": [-1360, 2128],
      "id": "4d8816d0-b0e8-4241-961d-cabcf708b37b",
      "name": "임베딩 문서 최적화 2"
    },
    {
      "parameters": {
        "options": {
          "dimensions": 1024
        }
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [-784, 2352],
      "id": "627f405d-eb40-4402-a878-2566364d74a3",
      "name": "Embeddings OpenAI4"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1.1,
      "position": [-656, 2352],
      "id": "ec145ee7-458e-4620-ba22-34a47970e2fb",
      "name": "Default Data Loader2"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "2445c0b2-9c27-4c74-89de-165fb7091d95",
              "leftValue": "={{ $json.released_at }}",
              "rightValue": "={{  $now }}",
              "operator": {
                "type": "dateTime",
                "operation": "beforeOrEquals"
              }
            },
            {
              "id": "1ddaec4a-7fa8-401e-bf13-08dec78e2d03",
              "leftValue": "={{ $json.released_at }}",
              "rightValue": "={{ $now.minus(1, 'year' ) }}",
              "operator": {
                "type": "dateTime",
                "operation": "afterOrEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.3,
      "position": [-2480, 1792],
      "id": "396d1edb-bab2-43c4-ad0e-683579770bf3",
      "name": "저번주 데이터만 필터(임시 1년)"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "edd1ffb1-520a-4c2d-85aa-06bf229a92fe",
              "leftValue": "={{ $json.published_date }}",
              "rightValue": "={{ $now }}",
              "operator": {
                "type": "dateTime",
                "operation": "beforeOrEquals"
              }
            },
            {
              "id": "2e9cb341-a99e-434c-a2b0-6a72fd7bfa9f",
              "leftValue": "={{ $json.published_date }}",
              "rightValue": "={{ $now.minus(1, 'year') }}",
              "operator": {
                "type": "dateTime",
                "operation": "afterOrEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.3,
      "position": [-2480, 2368],
      "id": "43643bdc-d0bb-4a10-b13b-febf897ba45b",
      "name": "저번주 데이터만 필터(임시 1년)2"
    },
    {
      "parameters": {
        "fieldToSplitOut": "data.tistory_posts",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [-2704, 2368],
      "id": "41989dc6-afd8-414b-94d1-069527d31a37",
      "name": "Split Out1"
    },
    {
      "parameters": {
        "jsCode": "return [{\n  embedding: JSON.parse($input.first().json.output[0].content[0].text).embedding_text\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [-1008, 2128],
      "id": "5a559568-9da9-44a0-867d-45e071c65d06",
      "name": "임베딩 추출"
    },
    {
      "parameters": {
        "jsCode": "return [{\n  embedding: JSON.parse($input.first().json.output[0].content[0].text).embedding_text\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [-336, 1552],
      "id": "71a19c4d-2659-4191-bb88-8f79c6996e96",
      "name": "임베딩 추출2"
    },
    {
      "parameters": {
        "mode": "insert",
        "pineconeIndex": {
          "__rl": true,
          "value": "woorifisa-blogs",
          "mode": "list",
          "cachedResultName": "woorifisa-blogs"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [-784, 2128],
      "id": "40debc6f-d110-4dd7-9a8f-54692bba0f8b",
      "name": "블로그 store(저장)"
    },
    {
      "parameters": {
        "mode": "insert",
        "pineconeIndex": {
          "__rl": true,
          "value": "woorifisa-blogs",
          "mode": "list",
          "cachedResultName": "woorifisa-blogs"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [-112, 1552],
      "id": "683c392f-51b5-4862-8858-b64a35139ac2",
      "name": "블로그 스토어 저장2"
    },
    {
      "parameters": {
        "resource": "Agent",
        "operation": "agent",
        "prompt": "Search Instructions:\n\n1. Perform a web search using Google.\n2. Set the search region to South Korea (KR).\n3. Use the following search query:\n   \"우리FISA 클라우드 엔지니어링 site:tistory.com\"\n\nTarget Platform Rules:\n\n- Only include blog posts hosted on Tistory subdomains.\n- Valid URLs must match the pattern:\n  https://*.tistory.com/*\n- The root domain https://www.tistory.com itself is NOT a valid blog post source.\n\nSelection Rules:\n\n- Select up to 10 blog posts.\n- Sort results by published date, newest first.\n- There is no restriction on the publication date range.\n\nExclusion Rules:\n\n- Exclude the following:\n  - https://www.tistory.com/*\n  - Non-blog pages\n  - Category, tag, archive, or search result pages\n  - Index or listing pages\n  - Duplicate posts (deduplicate by canonical URL)\n\nCrawling Rules:\n\n- Each selected URL must represent a single, individual blog post.\n- Crawl each blog post page individually.\n\nContent Extraction Rules (per blog post):\n\nExtract the following fields:\n\n- title:\n  - The blog post title as displayed on the page\n\n- body_text:\n  - Extract the full readable article text only\n  - Exclude advertisements, navigation UI, sidebars, headers, footers, and comments\n  - Preserve the original text order\n\n- tags:\n  - List of tags associated with the post, if available\n\n- source_url:\n  - The original canonical URL of the blog post\n\n- published_date:\n  - The publication date as displayed on the page",
        "schemaType": "manual",
        "schema": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"tistory_posts\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"required\": [\n          \"title\",\n          \"source_url\",\n          \"published_date\",\n          \"body_text\",\n          \"tags\"\n        ],\n        \"properties\": {\n          \"title\": {\n            \"type\": \"string\"\n          },\n          \"source_url\": {\n            \"type\": \"string\"\n          },\n          \"published_date\": {\n            \"type\": \"string\",\n            \"description\": \"Post publication date as shown on the original Tistory page (e.g. 2024-03-12)\"\n          },\n          \"body_text\": {\n            \"type\": \"string\",\n            \"description\": \"Full body text of the post. The publication date should also be included at the top of this text.\"\n          },\n          \"tags\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"type\": \"string\"\n            }\n          }\n        },\n        \"additionalProperties\": false\n      }\n    }\n  },\n  \"required\": [\"tistory_posts\"],\n  \"additionalProperties\": false\n}\n",
        "maxWaitTime": 600,
        "requestOptions": {}
      },
      "type": "@mendable/n8n-nodes-firecrawl.firecrawl",
      "typeVersion": 1,
      "position": [-2928, 2368],
      "id": "67e815b0-57cd-4646-abb3-71beffc00210",
      "name": "tistory 크롤러"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://v2.velog.io/graphql",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "content-type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "query",
              "value": "query SearchPosts($keyword: String!, $offset: Int, $username: String) {       searchPosts(keyword: $keyword, offset: $offset, username: $username) {         count         posts {           id           title           short_description           thumbnail           user {             id             username             profile {               id               thumbnail               display_name               __typename             }             __typename           }           url_slug           released_at           tags           is_private           comments_count           __typename         }         __typename       }     }"
            },
            {
              "name": "variables",
              "value": "{\"keyword\": \"우리fisa 클라우드 엔지니어링\"}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [-2928, 1792],
      "id": "718ecf4f-43ec-45f5-b2f5-c1def24df379",
      "name": "velog 크롤러",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "jsCode": "// 섹션별 분리\nfunction extract(label, text) {\n  const regex = new RegExp(`${label}[\\\\s\\\\S]*?(?=\\\\n\\\\d+\\\\. |$)`, \"g\");\n  const match = text.match(regex);\n  if (!match) return \"\";\n  return match[0].replace(label, \"\").trim();\n}\n\nfor (const item of $input.all()) {\n   // 섹션 추출\n  const raw = item.json.output;\n  const questionType = extract(\"1. 질문 유형\",raw);\n  const generalAnswer = extract(\"2. 답변\",raw);\n  const category = extract(\"3. 학습 카테고리\",raw);\n  const schedule = extract(\"4. 일정\",raw);\n  const lectures = extract(\"5. 수업 자료\",raw);\n  const blogs = extract(\"6. 블로그 자료\",raw);\n  \n  // 현재 시간\n  const now = new Date().toISOString();\n\n  return {\n      질문유형: questionType,\n      학습카테고리: category,\n      답변: generalAnswer,\n      일정: schedule,\n      수업자료: lectures,\n      블로그자료: blogs,\n      생성일시: now\n    }\n}\n\nreturn $input.all();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [-1760, 3264],
      "id": "0a2ad608-af11-48f7-82dc-0b0f8415f341",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineAll",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [-1536, 3440],
      "id": "a91ea7c6-4db0-4e60-8f56-9adfcb5ec031",
      "name": "Merge1"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryRedisChat",
      "typeVersion": 1.5,
      "position": [-2800, 3488],
      "id": "779c20ed-be6d-42c3-b72f-2624e89672eb",
      "name": "Redis Chat Memory"
    },
    {
      "parameters": {
        "table": {
          "__rl": true,
          "value": "fisa_chat_histories",
          "mode": "list",
          "cachedResultName": "fisa_chat_histories"
        },
        "dataMode": "defineBelow",
        "valuesToSend": {
          "values": [
            {
              "column": "question_type",
              "value": "={{ $json['질문유형'] }}"
            },
            {
              "column": "learning_category",
              "value": "={{ $json['학습카테고리'] }}"
            },
            {
              "column": "general_answer",
              "value": "={{ $json['일반답변'] }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.5,
      "position": [-1312, 3440],
      "id": "9a0c7c43-bfe6-4c50-8042-582336abf751",
      "name": "Insert rows in a table"
    },
    {
      "parameters": {
        "operation": "select",
        "table": {
          "__rl": true,
          "value": "fisa_schedule",
          "mode": "list",
          "cachedResultName": "fisa_schedule"
        },
        "limit": 200,
        "options": {}
      },
      "type": "n8n-nodes-base.mySqlTool",
      "typeVersion": 2.5,
      "position": [-2096, 3488],
      "id": "0aa821a6-0d4b-4ce5-99c0-90e2e34d6503",
      "name": "Select rows from a table in MySQL"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "edcd64db-8ece-412f-84ee-fdce959b7f39",
              "leftValue": "={{ $input.all().isNotEmpty() }}",
              "rightValue": {},
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [-2256, 1792],
      "id": "644d9d98-b3b6-4050-815f-57f2f68793cc",
      "name": "0개 이상"
    },
    {
      "parameters": {
        "operation": "select",
        "table": {
          "__rl": true,
          "value": "fisa_crawl_history",
          "mode": "list",
          "cachedResultName": "fisa_crawl_history"
        },
        "where": {
          "values": [
            {
              "column": "url",
              "value": "=https://velog.io/@{{ $json.user.username }}/{{ $json.url_slug }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.5,
      "position": [-1808, 1472],
      "id": "b541670a-03e1-4dea-92d1-77635808a82e",
      "name": "중복 데이터 확인",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "table": {
          "__rl": true,
          "value": "fisa_crawl_history",
          "mode": "list",
          "cachedResultName": "fisa_crawl_history"
        },
        "dataMode": "defineBelow",
        "valuesToSend": {
          "values": [
            {
              "column": "source_type",
              "value": "blog"
            },
            {
              "column": "url",
              "value": "=https://velog.io/@{{ $('Merge').item.json.user.username }}/{{ $('Merge').item.json.url_slug }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.5,
      "position": [240, 1680],
      "id": "8cea9c5f-a0f0-42b4-8556-b544d4f22fa7",
      "name": "블로그 크롤링 정보 저장"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "2eb0f95a-4558-4687-b230-ab68e41c49ac",
              "leftValue": "={{$json.values() }}",
              "rightValue": "",
              "operator": {
                "type": "array",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [-1584, 1472],
      "id": "90ee736d-351d-4bf9-9acd-8c21750dcd77",
      "name": "중복이 아닌 경우"
    },
    {
      "parameters": {
        "operation": "select",
        "table": {
          "__rl": true,
          "value": "fisa_crawl_history",
          "mode": "list",
          "cachedResultName": "fisa_crawl_history"
        },
        "where": {
          "values": [
            {
              "column": "url",
              "value": "=https://velog.io/@{{ $json.user.username }}/{{ $json.url_slug }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.5,
      "position": [-1808, 2128],
      "id": "66ea964d-f91c-42c0-b284-8538e96913c0",
      "name": "중복 데이터 확인1",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "cd9783cd-f5de-437f-93b7-2dc6a459eacc",
              "leftValue": "",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [-1584, 2128],
      "id": "b85b4661-41c6-48e6-aab7-c43df53a7994",
      "name": "If"
    },
    {
      "parameters": {
        "table": {
          "__rl": true,
          "value": "fisa_crawl_history",
          "mode": "list",
          "cachedResultName": "fisa_crawl_history"
        },
        "dataMode": "defineBelow",
        "valuesToSend": {
          "values": [
            {
              "column": "source_type",
              "value": "blog"
            },
            {
              "column": "url",
              "value": "={{ $('0개 이상1').first().json.source_url }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.5,
      "position": [-432, 2256],
      "id": "90c4044f-d07c-4f2b-982b-1b8229c611ff",
      "name": "블로그 크롤링 정보 저장1"
    },
    {
      "parameters": {
        "table": {
          "__rl": true,
          "value": "fisa_crawl_history",
          "mode": "list",
          "cachedResultName": "fisa_crawl_history"
        },
        "dataMode": "defineBelow",
        "valuesToSend": {
          "values": [
            {
              "column": "source_type",
              "value": "notion"
            },
            {
              "column": "url",
              "value": "={{ $('Loop Over Items2').item.json.url }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.5,
      "position": [-1008, 2832],
      "id": "233ea45b-8ef1-4356-bee4-484bb46d951e",
      "name": "Insert rows in a table1"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://notion-crawler:3000/crawl",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "excludeUrls",
              "value": "={{ $json.urls }}"
            }
          ]
        },
        "options": {
          "timeout": 100000000
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [-2480, 2832],
      "id": "6b3a734b-33cf-4e29-ae3a-22ac6281aacd",
      "name": "교안 노션 크롤러"
    },
    {
      "parameters": {
        "operation": "select",
        "table": {
          "__rl": true,
          "value": "fisa_crawl_history",
          "mode": "list",
          "cachedResultName": "fisa_crawl_history"
        },
        "where": {
          "values": [
            {
              "column": "source_type",
              "value": "notion"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.5,
      "position": [-2928, 2832],
      "id": "d6aa0dbb-b404-48f7-b64b-cbb781f52927",
      "name": "Select rows from a table",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "fieldToSplitOut": "pages",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [-2032, 2832],
      "id": "e8943e4a-8773-4097-984f-93f5e5421597",
      "name": "Split Out2"
    },
    {
      "parameters": {
        "jsCode": "// Loop over input items and add a new field called 'myNewField' to the JSON of each one\nconst urls = [];\nfor (const item of $input.all()) {\n  urls.push(item.json.url)\n}\n\nreturn {\n  urls\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [-2704, 2832],
      "id": "b175ef8c-551a-41a8-8862-74a7e1fd6b08",
      "name": "Code in JavaScript2"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineAll",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [-912, 1552],
      "id": "8fccf03d-0ae5-4b23-afc8-a8ee9c78dac9",
      "name": "Merge"
    },
    {
      "parameters": {
        "description": "You can call the MCP to retrieve the current date and time\nbased on the user's locale and timezone.\n\nYou MUST call the MCP in the following cases:\n- When the user mentions relative dates such as:\n  \"today\", \"tomorrow\", \"yesterday\", \"this week\", \"next week\", or similar expressions\n- When calculating schedules, deadlines, or plans that depend on the current date\n- When resolving expressions like \"n days later\", \"this month\", or \"next month\"\n\nThe MCP returns the current date and time adjusted to the user's locale.\nAlways use the MCP result as the source of truth for \"now\".\n\nDo NOT assume or hardcode the current date or time.\nDo NOT calculate relative dates without calling the MCP first.\n",
        "jsCode": "return new Date().toLocaleString('ko-KR', {\n  timeZone: 'Asia/Seoul'\n})\n"
      },
      "type": "@n8n/n8n-nodes-langchain.toolCode",
      "typeVersion": 1.3,
      "position": [-1968, 3488],
      "id": "f61a51f6-c95e-460e-9d26-ae113edbb86c",
      "name": "현재날짜 반환"
    }
  ],
  "pinData": {},
  "connections": {
    "Chatbot": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "크롤링 결과 판단(Notion 교안)": {
      "main": [
        [
          {
            "node": "Split Out2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "주간 크롤러": {
      "main": [
        [
          {
            "node": "velog 크롤러",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "일간 크롤러": {
      "main": [
        [
          {
            "node": "Select rows from a table",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out": {
      "main": [
        [
          {
            "node": "저번주 데이터만 필터(임시 1년)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "상세정보 가져오기": {
      "main": [
        [
          {
            "node": "HTML 태그 제거",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "1개씩",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "1개씩": {
      "main": [
        [],
        [
          {
            "node": "중복 데이터 확인",
            "type": "main",
            "index": 0
          },
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "주간 크롤러1": {
      "main": [
        [
          {
            "node": "tistory 크롤러",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTML 태그 제거": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "블로그 스토어 저장2",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "Chatbot",
            "type": "main",
            "index": 0
          },
          {
            "node": "Merge1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "교안 스토어": {
      "main": [
        [
          {
            "node": "Insert rows in a table1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader1": {
      "ai_document": [
        [
          {
            "node": "교안 스토어",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Chatbot",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "블로그 스토어 저장2",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI1": {
      "ai_embedding": [
        [
          {
            "node": "교안 스토어",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items2": {
      "main": [
        [],
        [
          {
            "node": "Code in JavaScript1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript1": {
      "main": [
        [
          {
            "node": "교안 스토어",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI2": {
      "ai_embedding": [
        [
          {
            "node": "lecture store(read)",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI3": {
      "ai_embedding": [
        [
          {
            "node": "blog store(read)",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "lecture store(read)": {
      "ai_tool": [
        [
          {
            "node": "Chatbot",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "blog store(read)": {
      "ai_tool": [
        [
          {
            "node": "Chatbot",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "0개 이상1": {
      "main": [
        [
          {
            "node": "1개씩1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "1개씩1": {
      "main": [
        [],
        [
          {
            "node": "중복 데이터 확인1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "임베딩 문서 최적화": {
      "main": [
        [
          {
            "node": "임베딩 추출2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "임베딩 문서 최적화 2": {
      "main": [
        [
          {
            "node": "임베딩 추출",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI4": {
      "ai_embedding": [
        [
          {
            "node": "블로그 store(저장)",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader2": {
      "ai_document": [
        [
          {
            "node": "블로그 store(저장)",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "저번주 데이터만 필터(임시 1년)": {
      "main": [
        [
          {
            "node": "0개 이상",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "저번주 데이터만 필터(임시 1년)2": {
      "main": [
        [
          {
            "node": "0개 이상1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out1": {
      "main": [
        [
          {
            "node": "저번주 데이터만 필터(임시 1년)2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "임베딩 추출": {
      "main": [
        [
          {
            "node": "블로그 store(저장)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "임베딩 추출2": {
      "main": [
        [
          {
            "node": "블로그 스토어 저장2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "블로그 store(저장)": {
      "main": [
        [
          {
            "node": "블로그 크롤링 정보 저장1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "블로그 스토어 저장2": {
      "main": [
        [
          {
            "node": "블로그 크롤링 정보 저장",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "tistory 크롤러": {
      "main": [
        [
          {
            "node": "Split Out1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "velog 크롤러": {
      "main": [
        [
          {
            "node": "Split Out",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Merge1": {
      "main": [
        [
          {
            "node": "Insert rows in a table",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Redis Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "Chatbot",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Select rows from a table in MySQL": {
      "ai_tool": [
        [
          {
            "node": "Chatbot",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "0개 이상": {
      "main": [
        [
          {
            "node": "1개씩",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "중복 데이터 확인": {
      "main": [
        [
          {
            "node": "중복이 아닌 경우",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "블로그 크롤링 정보 저장": {
      "main": [
        [
          {
            "node": "1개씩",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "중복이 아닌 경우": {
      "main": [
        [
          {
            "node": "상세정보 가져오기",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "1개씩",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "중복 데이터 확인1": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "임베딩 문서 최적화 2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "1개씩1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "블로그 크롤링 정보 저장1": {
      "main": [
        [
          {
            "node": "1개씩1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Insert rows in a table1": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "교안 노션 크롤러": {
      "main": [
        [
          {
            "node": "크롤링 결과 판단(Notion 교안)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Select rows from a table": {
      "main": [
        [
          {
            "node": "Code in JavaScript2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out2": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript2": {
      "main": [
        [
          {
            "node": "교안 노션 크롤러",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "임베딩 문서 최적화",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "현재날짜 반환": {
      "ai_tool": [
        [
          {
            "node": "Chatbot",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "versionId": "6d29e3a5-6fed-43d5-b99c-07cd9695404f",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "68f95072d6eeccd9215599b08992699f2f1d7fec8e4e146c79b722ddf70b36fb"
  },
  "id": "fZp1f_Y7O6igs85UazRLs",
  "tags": []
}
